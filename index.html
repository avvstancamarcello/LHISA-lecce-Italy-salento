<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>LHISA Lecce NFT ‚Äì Ricerca Scientifica STOP DEPRESSION - Cura e GUARIGIONE</title> 
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="LHISA NFT Lecce - Acquista NFT per finanziare ricerca scientifica sulla depressione. Medical Hotel LHI Salento, progetto blockchain Polygon con Prof. Riccardo Simoni.">
    <meta name="keywords" content="NFT Lecce, ricerca depressione, Medical Hotel LHI, blockchain Polygon, NFT sanitari, Salento">
    <meta name="author" content="Avv. Marcello Stanca">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://avvstancamarcello.github.io/LHISA-lecce-Italy-salento/">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://avvstancamarcello.github.io/LHISA-lecce-Italy-salento/">
    <meta property="og:title" content="LHISA NFT Lecce - Ricerca Scientifica STOP DEPRESSION">
    <meta property="og:description" content="NFT unici per sostenere ricerca sulla depressione. Medical Hotel LHI Lecce.">
    <meta property="og:image" content="https://avvstancamarcello.github.io/LHISA-lecce-Italy-salento/images/LHI_NFT_LECCE_logo.svg">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="LHISA NFT Lecce - Ricerca Depressione">
    <meta name="twitter:description" content="NFT per finanziare ricerca sulla depressione">
    <meta name="twitter:image" content="https://avvstancamarcello.github.io/LHISA-lecce-Italy-salento/images/STOP_DEPRESSION_LHI.jpg">
    
    <!-- Preload risorse critiche -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="preconnect" href="https://polygon-mainnet.infura.io" crossorigin>

    <!-- DNS Prefetch per servizi esterni -->
    <link rel="dns-prefetch" href="https://polygonscan.com">
    <link rel="dns-prefetch" href="https://opensea.io">
    <link rel="dns-prefetch" href="https://lhilecce.it">

    <!-- Preload immagine banner (above the fold) -->
    <link rel="preload" as="image" href="images/banner.png" type="image/png">
    
    <style>
        * {
            box-sizing: border-box;
        }
        html, body {
            overflow-x: hidden;
            width: 100%;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0 auto;
            max-width: 1000px;
            background: #f7f7f7;
            padding: 20px;
            text-align: center;
        }
        
        /* Responsive images - ensures all images fit screen */
        img {
            max-width: 100%;
            height: auto;
        }
        
        /* RESPONSIVE MOBILE FIX */
        @media (max-width: 768px) {
            body {
                max-width: 100vw;
                width: 100%;
                padding: 10px;
                margin: 0;
                overflow-x: hidden;
            }
            
            /* Forza tutti i contenitori a stare dentro lo schermo */
            * {
                max-width: 100% !important;
            }
            
            /* Logo pi√π piccoli su mobile */
            .section-content img,
            svg {
                max-width: 100% !important;
                height: auto !important;
            }
            
            /* Fix testo che esce */
            .section-content,
            .normal-text,
            p, div, span {
                max-width: 100% !important;
                overflow-wrap: break-word !important;
                word-break: break-word !important;
                box-sizing: border-box !important;
            }
            
            /* Titoli pi√π piccoli su mobile */
            .section-title {
                font-size: 1.3em !important;
                padding: 0 10px;
                line-height: 1.3;
            }
            
            /* Logo container stack verticale su mobile */
            [style*="display: flex"] {
                flex-direction: column !important;
                align-items: center !important;
                width: 100% !important;
                gap: 15px !important;
            }
            
            .section-content {
                padding: 5px;
                max-width: 100%;
                width: 100%;
                margin: 10px 0;
            }
            .grid-row {
                flex-direction: row !important;
                justify-content: center;
                width: 100%;
                gap: 10px;
            }
            .nft-card, .building-card {
                width: 42%;
                max-width: 180px;
                margin: 5px;
            }
            .nft-card img, .building-card img {
                width: 100%;
                height: auto;
                max-width: 180px;
                max-height: 180px;
            }
            .banner-container {
                width: 100%;
                padding: 0;
            }
            .banner-container img {
                width: 100%;
                max-width: 100%;
            }
            h1 {
                font-size: 1.2em !important;
                padding: 0 5px;
            }
            .language-selector {
                top: 5px !important;
                right: 5px !important;
            }
        }
        p, .seection-title, h1, h2, h3, h4, span, div {
            word-break: break-word;
            overflow-wrap: break-word;
            white-space: pre-line;
        }
        header {
            text-align: center;
        }
        .language-selector button:hover {
            background-color: #0056b3;
        }

        .language-selector {
            z-index: 1000;
        }
        .banner-container {
            width: 100%;
            text-align: center;
            margin-bottom: 20px;
        }
        .banner-container img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .grid-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px; /* Spazio tra le card */
            margin-bottom: 30px; /* Spazio sotto ogni riga di immagini */
        }
        .nft-card, .building-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            width: 200px; /* Larghezza fissa per 4 card affiancate */
            padding: 10px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
        }
        .nft-card img, .building-card img {
            max-width: 100%;
            height: 200px; /* Altezza fissa per coerenza visuale */
            object-fit: cover; /* Assicura che l'immagine copra l'area */
            border: 2px solid #ccc;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        button {
            margin-top: 10px;
            padding: 8px 12px;
            background-color: #0077cc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
        }
        button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
        #log {
            background: #fff;
            padding: 10px;
            border-radius: 6px;
            margin-top: 20px;
            white-space: pre-wrap;
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #eee;
        }
        /* Stili per le sezioni di testo */
        .section-title {
            font-size: 1.5em !important;
            font-weight: bold;
            color: #b22222;
            margin-top: 40px;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.4;
        }
        /* TESTO GIUSTIFICATO PER TUTTE LE SEZIONI */
        .section-content,
        .section-content p,
        .section-content ul,
        .section-content li,
        .section-content span,
        .section-content div {
            text-align: justify !important;
            word-break: break-word;
            overflow-wrap: break-word;
            white-space: normal;
        }
        /* GIUSTIFICA ANCHE NORMAL-TEXT */
        .normal-text,
        .normal-text p,
        .normal-text ul,
        .normal-text li {
            text-align: justify !important;
            word-break: break-word;
        }
        .section-content {
            margin: 30px auto;
            width: 100%;
            max-width: 1000px;
            line-height: 1.7;
            font-size: 1.1em !important;
            display: block;
            color: #000000;
        }
        .section-content p, .section-content a, .section-content li, .section-content span, .section-content strong {
            font-size: 1.1em !important;
            color: #000000;
        }
        .section-content a.normal-link {
            font-size: 1em !important;
            text-decoration: underline;
            color: #0077cc;
        }
        .section-content a.title-link {
            font-size: 1.3em !important;
            color: #b22222;
            text-decoration: underline;
            font-weight: normal;
        }
        /* Forza dimensioni uniformi per TUTTI gli elementi di testo nelle sezioni */
        .section-content * {
            font-size: 1.1em !important;
        }
        /* Eccezioni per link specifici */
        .section-content a.normal-link {
            font-size: 1em !important;
        }
        .section-content a.title-link {
            font-size: 1.3em !important;
        }
        .nft-card p, .building-card p {
            font-size: 0.8em !important;
        }
        .normal-text {
            font-size: 1.1em !important;
            color: #000000;
            margin: 20px auto;
            text-align: justify !important;
        }
        .normal-text p {
            font-size: 1.1em !important;
            color: #000000;
            text-align: justify !important;
        }
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            font-size: 0.9em;
            color: #666;
            text-align: center;
        }
        /* Nuovo stile per le caselle Mint */
        .mint-box {
            border-radius: 10px;
            padding: 25px;
            margin: 40px auto;
            max-width: 500px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .mint-box.ft-box {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }
        
        .mint-box.nft-box {
            background: #e8f5e9; /* Sfondo verde chiaro */
            color: #333;
        }
        
        .mint-box img {
            max-width: 180px;
            border-radius: 8px;
            border: 3px solid #4caf50;
        }
        .mint-box button {
            padding: 12px 25px;
            font-size: 1.1em;
            background-color: #4CAF50; /* Verde */
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .ft-input {
            padding: 10px;
            font-size: 1.1em;
            border: 2px solid #fff;
            border-radius: 6px;
            width: 200px;
            text-align: center;
        }
        /* Stile per il link IPFS della collezione */
        .ipfs-collection-link {
            margin-top: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }
        /* Stili per le stelle del feedback */
        .star-rating {
            display: inline-block;
            unicode-bidi: bidi-override;
            direction: rtl;
            font-size: 2em;
        }
        .star-rating > input {
            display: none;
        }
        .star-rating > label {
            padding: 5px;
            cursor: pointer;
            color: #ccc; /* Colore stelle non selezionate */
        }
        .star-rating > label:before {
            content: '‚òÖ';
        }
        .star-rating > input:checked ~ label {
            color: #ffc107; /* Colore stelle selezionate (oro) */
        }
        .star-rating > label:hover,
        .star-rating > label:hover ~ label {
            color: #ffc107;
        }
        .feedback-form textarea {
            width: 80%;
            height: 80px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
            resize: vertical;
        }
        .feedback-message {
            margin-top: 15px;
            font-weight: bold;
            color: green;
        }
        
        /* Barra di progresso */
        #progressContainer {
            width: 80%;
            background: #ddd;
            border-radius: 10px;
            margin: 20px auto;
            height: 20px;
            display: none; /* nascosta finch√© non serve */
        }
        #progressBar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff7f50, #ff5722);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        /* Fix overflow testo fuori schermo */
        .normal-text,
        .section-content,
        .section-content p,
        .section-content div {
            max-width: 100%;
            overflow-wrap: break-word;
            word-wrap: break-word;
            word-break: break-word;
            hyphens: auto;
        }

        /* Fix container flex che causa overflow */
        body > div,
        body > section,
        body > article {
            max-width: 100%;
            overflow-x: hidden;
        }

        /* Previeni overflow negli elementi flex */
        .grid-row,
        [style*="display: flex"] {
            flex-wrap: wrap;
            overflow: hidden;
        }
        
        /* Screen Reader Only */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus visibile per tastiera */
        button:focus-visible,
        a:focus-visible,
        select:focus-visible {
            outline: 3px solid #ff9800;
            outline-offset: 2px;
        }

        /* Skip link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #000;
            color: #fff;
            padding: 8px;
            z-index: 10000;
        }

        .skip-link:focus {
            top: 0;
        }
        
        /* Indicatore ambiente sviluppo */
        .dev-indicator {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: linear-gradient(135deg, #ff6b6b, #ff8787);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            z-index: 9999;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .prod-indicator {
            display: none; /* Nascosto in produzione */
        }
    </style>
    <meta name="clientID"
          content="BPOZFh3Z8-D35OCK2tAPyeybjWmNA_GAlJ2pw-MSxZlDcMeit73G0PXUVE-EF9GWrX7DSpxktOulSTEuh4cR0fs">
    <meta name="infuraURL"
          content="https://polygon-mainnet.infura.io/v3/c690c86b64b74bd5a69ad2d32cf2a0c6">
</head>
<body>
    <a href="#main-content" class="skip-link">Salta al contenuto</a>
    <main id="main-content" role="main">
    <!-- Indicatore ambiente (visibile solo in dev) -->
    <div id="env-indicator" style="display: none;">
        <span class="dev-indicator">üîß AMBIENTE DI SVILUPPO</span>
    </div>

    <div class="banner-container">
        <img src="images/banner.png" alt="Banner del Progetto LHISA NFT">
    </div>

    <header>
        <div class="language-selector" style="position: absolute; top: 20px; right: 20px;">
          <button id="translateBtn" type="button" aria-label="Cambia lingua in inglese" onclick="toggleLanguage()" style="padding: 8px 16px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">English</button>
        </div>     
        <h1 class="header-main">LHISA NFT ‚Äì Ricerca Scientifica e Salute</h1> <p class="header-links">
            üîó <a href="https://lhilecce.it" target="_blank" rel="noopener noreferrer">Visita lhilecce.it SITO UFFICIALE</a> |
            üó∫Ô∏è <a href="https://www.google.com/maps/place/LHI+HEALTHY+HUB/@40.3320047,18.1613206,3a,75y,90t/data=!3m8!1e2!3m6!1shttps:%2F%2Fimages.trvl-media.com%2Flodging%2F113000000%2F112930000%2F112928700%2F112928681%2Fee2855ab_z.jpg!2e7!3e27!6shttps:%2F%2Flh3.googleusercontent.com%2Fgps-proxy%2FALd4DhF-dXaxC9wKd6uJHPxdWL6vw_X3XmLpxRMoSbGJ5CXiAaPOiD1ec4Ny9QV3kNHK4ROP9b9-82bWdRnEqKvaEJZyntSHWbzuBQJRjXD218BY6r94S5iwa8M55cP6zVNvqhInjbGawKNeBGDaPCTOr_PozblIctnFUyJa186qtE-zgmmCw21K_TUn%3Dw203-h135-k-no!7i1000!8i667!4m10!3m9!1s0x13442fc918b6d029:0x8ec95204297a6e3!5m2!4m1!1i2!8m2!3d40.3318171!4d18.1616302!10e5!16s%2Fg%2F11px8gr_q0?entry=ttu"
                 target="_blank" rel="noopener noreferrer">Esplora il Medical Hotel LHI con Google Maps</a> |
               <a href="https://www.booking.com/hotel/it/lhi-healthy-lecce.it.html?aid=2311236&label=it-it-booking-desktop-new&sid=ca1c307f5122bd9e7cdf248bded89147&dest_id=13580677&dest_type=hotel&dist=0&group_adults=2&group_children=0&hapos=1&hpos=1&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1753169606&srpvid=a2590655f19e4745a66d61eb256466e5&type=total&ucfs=1&"
                 target="_blank" rel="noopener noreferrer">Booking prenota la tua camera a Lecce in LHI</a>
        </p>
    </header>

    <div class="grid-row">

        <div class="building-card">
            <img 
                alt="Struttura medica LHI Lecce - Medical Hotel all'avanguardia" 
                src="images/edificio1.png" 
                loading="lazy" 
                decoding="async"
                width="300" 
                height="200"
                style="width: 100%; max-width: 300px; height: auto; object-fit: contain;">
            <p>La nostra struttura medica all'avanguardia.</p>
        </div>
        <div class="building-card">
            <img 
                alt="Spazi benessere LHI Lecce - Riabilitazione e comfort" 
                src="images/edificio2.png" 
                loading="lazy" 
                decoding="async"
                width="300" 
                height="200"
                style="width: 100%; max-width: 300px; height: auto; object-fit: contain;">
            <p>Spazi dedicati al benessere e alla riabilitazione.</p>
        </div>
        <div class="building-card">
            <img 
                alt="Architettura LHI Lecce - Design e salute" 
                src="images/edificio3.png" 
                loading="lazy" 
                decoding="async"
                width="300" 
                height="200"
                style="width: 100%; max-width: 300px; height: auto; object-fit: contain;">
            <p>Architettura e comfort al servizio della salute.</p>
        </div>
    </div>

    <!-- Smart Contract Verificato centrato -->
    <div style="display: flex; flex-direction: column; align-items: center; margin: 20px 0;">
        <img 
            alt="Moneta scientifica Stop Depression - NFT LHI Lecce" 
            src="images/STOP_DEPRESSION_LHI.jpg" 
            loading="lazy" 
            decoding="async"
            width="350" 
            height="350"
            style="width: 100%; max-width: 350px; height: auto; object-fit: contain;">
        <p class="normal-text"><a href="https://polygonscan.com/address/0xcAD9C4EfBa776f9F55A71d442EC024BBB5DD2b1c" target="_blank" rel="noopener noreferrer" class="normal-link" aria-label="Smart Contract Verificato - apre in una nuova scheda">Smart Contract Verificato - Leggilo aprendo questo link.</a></p>
        <div id="contract-status" style="margin: 15px 0; padding: 10px; text-align: center;"></div>
    </div>

      <article id="progetto-depressione">
        <header>
            <h2 class="section-title" style="font-size: 1.5em !important; font-weight: bold; color: #b22222; margin: 30px 0 20px 0;">
                1. La DEPRESSIONE: Un Progetto per la Ricerca Scientifica
            </h2>
        </header>
        
        <section class="section-content">
            <p>
                Acquistando un NFT, non solo entri in possesso di un asset digitale di valore,
                ma finanzi direttamente la ricerca scientifica per la guarigione dalla
                <strong>DEPRESSIONE</strong>, contribuendo a un obiettivo di immenso valore sociale.
            </p>
            
            <aside class="researcher-info">
                <p>
                    Il referente scientifico, Responsabile del progetto di ricerca e cura
                    √® il <strong>Prof. Riccardo SIMONI</strong>, iscritto all'Ordine dei Medici di Firenze.
                    <a href="images/Simoni2.jpg" target="_blank" class="normal-link" 
                       aria-label="Consulta curriculum Prof. Simoni - apre in una nuova scheda">Consulta curriculum</a>
                </p>
                <p>
                    Il Responsabile scientifico del progetto, √® medico specialista in
                    Psichiatria, che vanta <strong>30 anni di grande esperienza clinica ospedaliera</strong>,
                    docenza in corsi di specializzazione e master di formazione per la ricerca
                    scientifica e farmacologica, e pu√≤ documentare numerosi casi di guarigione
                    dalla Depressione, anche di personaggi dello spettacolo,
                    grazie all'uso di una terapia personalizzata, monitorata in tempo reale
                    con flusso di feedback individuali.
                </p>
                <p>
                    La Depressione √® ormai annoverata come una malattia sociale,
                    molto insidiosa e non facilmente riconoscibile nelle famiglie, che oggi
                    pu√≤ colpire chiunque, senza distinzione di et√†, di livello d'istruzione
                    o di attivit√† di lavoro. Il Prof. Riccardo SIMONI ha dedicato 35 anni
                    di studi clinici alla patologia depressiva, individuando i farmaci
                    pi√π efficaci e meno aggressivi per l'organismo, e riportando il paziente
                    al pieno equilibrio psicofisico nella gestione delle proprie capacit√†.
                </p>
            </aside>
        </section>
    </article>

    <!-- Logo LHI affiancati con dimensioni ridotte -->
    <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 30px; margin: 30px auto; flex-wrap: wrap; max-width: 750px;">
        
        <div style="display: flex; flex-direction: column; align-items: center; flex: 1; min-width: 280px; max-width: 320px;">
            <a href="images/LHI_NFT_LECCE_logo.svg" target="_blank">
                <img src="images/LHI_NFT_LECCE_logo.svg" 
                     alt="Logo NFT marketplace LHI Lecce" 
                     style="width: 100%; max-width: 300px; height: auto; object-fit: contain; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
                     loading="lazy"
                     width="300"
                     height="300">
            </a>
            <p class="normal-text" style="margin-top: 10px; font-size: 0.9em; text-align: center;">Logo Icona LHI Lecce NFT</p>
            <p class="normal-text" style="margin-top: 5px; text-align: center;">
                üåä <a href="https://opensea.io/collection/lhi-lecce-nft" target="_blank" class="normal-link" style="font-weight: bold; color: #0077cc; font-size: 0.9em;">
                    Collezione OpenSea
                </a>
            </p>
        </div>
        
        <div style="display: flex; flex-direction: column; align-items: center; flex: 1; min-width: 280px; max-width: 320px;">
            <a href="https://www.lhilecce.it" target="_blank" title="LHI Lecce Sito Ufficiale">
                <svg xmlns="http://www.w3.org/2000/svg" 
                     xml:space="preserve" 
                     width="300" 
                     height="116" 
                     viewBox="0 0 10000 3885.9" 
                     style="max-width: 300px; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                    <defs>
                        <style type="text/css">
                            .fil2 {fill:#952727}
                            .fil1 {fill:#6B6B6A;fill-rule:nonzero}
                            .fil0 {fill:#952727;fill-rule:nonzero}
                        </style>
                    </defs>
                    <g id="Livello_x0020_1">
                        <metadata id="CorelCorpID_0Corel-Layer"/>
                        <path class="fil0" d="M2734.12 3338.59l0 -739.82 -1927.01 0c-38.48,0 -73.21,-34.67 -73.21,-77.09l0 -2515.95 -739.77 0 0 2593.04c0,404.62 331.25,739.82 739.77,739.82l2000.22 0z"/>
                        <polygon class="fil1" points="5232.83,2040.16 5232.83,1300.43 3749.46,1300.43 3749.46,5.86 3009.7,5.86 3009.7,3338.59 3749.46,3338.59 3749.46,2040.16 "/>
                        <path class="fil2" d="M5474.52 5.85l3650.34 0 0 3350.76 -3650.34 0 0 -3350.76zm4321.95 1342.2c-217.18,60.23 -540.68,34.04 -874.37,-87.29 -530.9,-193.25 -886.69,-554.91 -794.63,-807.76 18.88,-52.03 55.26,-95.47 105.87,-129.8 -128.36,35.55 -219.54,101.2 -253.77,195.19 -92.06,252.86 263.8,614.53 794.69,807.69 421.71,153.55 827.13,154.77 1022.21,21.97zm147.58 479.78c-303.43,84 -755.52,47.54 -1221.75,-121.99 -741.78,-270.15 -1238.99,-775.38 -1110.34,-1128.77 26.34,-72.71 77.22,-133.3 147.83,-181.43 -179.2,49.86 -306.65,141.48 -354.53,272.87 -128.47,353.23 368.58,858.62 1110.55,1128.59 589.17,214.51 1155.67,216.17 1428.24,30.73zm50.08 574.05c-375.97,104.18 -936.04,59.07 -1513.68,-151.09 -919.22,-334.69 -1535.15,-960.79 -1375.87,-1398.5 32.76,-90.16 95.89,-165.19 183.38,-224.73 -222.26,61.66 -380.12,175.27 -439.28,337.85 -159.36,437.78 456.56,1064.02 1375.83,1398.5 729.99,265.72 1431.87,267.73 1769.62,37.97zm-213.54 515.79c-401.71,111.28 -1000.36,63.02 -1617.74,-161.68 -982.46,-357.5 -1640.77,-1026.63 -1470.56,-1494.54 35.13,-96.38 102.52,-176.6 196,-240.25 -237.45,65.91 -406.24,187.28 -469.49,361.18 -170.38,467.93 488.09,1137 1470.52,1494.67 780.22,283.96 1530.37,286.28 1891.27,40.62zm-374.53 508.43c-375.89,103.98 -936.03,58.8 -1513.6,-151.28 -919.2,-334.65 -1535.31,-960.67 -1376,-1398.48 32.9,-90.16 95.91,-165.18 183.41,-224.74 -222.14,61.61 -380,175.28 -439.18,337.88 -159.45,437.95 456.45,1063.98 1375.85,1398.51 729.97,265.69 1431.75,267.74 1769.52,38.11zm-624.93 341.27c-279.6,77.45 -696.19,43.94 -1125.84,-112.55 -683.76,-248.8 -1141.93,-714.53 -1023.42,-1040.2 24.31,-67.02 71.23,-122.93 136.26,-167.26 -165.16,45.88 -282.58,130.45 -326.66,251.35 -118.49,325.69 339.68,791.5 1023.36,1040.19 543.15,197.76 1065.13,199.43 1316.3,28.47z"/>
                    </g>
                </svg>
            </a>
            <p class="normal-text" style="margin-top: 10px; font-size: 0.9em; text-align: center;">
                Logo istituzionale LHI Lecce<br>
                <a href="https://www.lhilecce.it" target="_blank" class="normal-link">www.lhilecce.it</a>
            </p>
        </div>
        
    </div>

    <!-- Continua con sezione successiva "2. Un Progetto Immobiliare..." -->
    <div class="section-title">2. Un Progetto Immobiliare Reale, un Valore Tangibile</div>
    <div class="section-content">
        A differenza di molti progetti digitali, il valore di un NFT LHI non √® astratto.
        √à direttamente collegato a un <strong>bene immobile e reale del valore di 10 milioni di euro</strong>:
        la struttura del Medical Hotel a Lecce. Questa imponente struttura di 7 piani (4.000 mq) √®
        il risultato di 20 anni di lavoro e dell'investimento di decine di famiglie. La sua posizione
        strategica, di fronte ai poli ospedalieri di Lecce, le conferisce un ruolo centrale
        nell'ospitalit√† sanitaria. Il capitale sociale √® interamente versato. 
    </div>


    <!-- Blocco affiancato: Moneta scientifica + Logo NFT LHI con didascalia e link OpenSea -->
    <div style="display: flex; flex-direction: row; align-items: flex-start; justify-content: center; gap: 30px; margin: 30px auto; flex-wrap: wrap; max-width: 800px;">
        <div style="display: flex; flex-direction: column; align-items: center; flex: 1; min-width: 300px; max-width: 350px;">
            <img alt="NFT Moneta Scientifica STOP DEPRESSION" 
                 src="images/STOP_DEPRESSION_LHI.jpg" 
                 style="width: 100%; max-width: 350px; height: auto; aspect-ratio: 1/1; object-fit: contain; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
                 loading="lazy"
                 width="350"
                 height="350">
            <p class="normal-text" style="margin-top: 10px; font-size: 0.95em; text-align: center;">NFT Moneta Scientifica STOP DEPRESSION</p>
        </div>
        
        <div style="display: flex; flex-direction: column; align-items: center; flex: 1; min-width: 300px; max-width: 350px;">
            <a href="images/LHI_NFT_LECCE_logo.svg" target="_blank">
                <img src="images/LHI_NFT_LECCE_logo.svg" 
                     alt="NFT marketplace LHI Lecce" 
                     style="width: 100%; max-width: 350px; height: auto; aspect-ratio: 1/1; object-fit: contain; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
                     loading="lazy"
                     width="350"
                     height="350">
            </a>
            <p class="normal-text" style="margin-top: 10px; font-size: 0.95em; text-align: center;">Logo Icona LHI Lecce NFT</p>
            <p class="normal-text" style="margin-top: 8px; text-align: center;">
                üåä <a href="https://opensea.io/collection/lhi-lecce-nft" target="_blank" class="normal-link" style="font-weight: bold; color: #0077cc; font-size: 0.95em;">
                    Collezione OpenSea
                </a>
            </p>
        </div>
    </div>

        <section class="nft-section">
            <h2 class="section-title" data-translate="section3_title">Storia della Realizzazione di Life Healthcare International - L.H.I</h2>
            
            <div class="section-content" data-translate="section3_1">
                Il progetto Life Healthcare International nasce dall'innovativa visione di creare una struttura sanitaria e ricettiva d'eccellenza nel cuore del Salento. Sotto la guida della Dott.ssa Cinzia Colizzi, Presidente del CdA e Dottore Commercialista, il progetto ha preso forma attraverso un complesso iter progettuale e finanziario che ha coinvolto le pi√π importanti istituzioni e professionisti della regione pugliese, rappresentando un esempio virtuoso di collaborazione pubblico-privato nel settore dell'healthcare e dell'hospitality.
            </div>
            
            <div class="grid-row">
                <div class="nft-card">
                    <img 
                        src="images/75.jpg" 
                        alt="NFT 75 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_75">NFT 75</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(75)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 75</button>
                </div>
                <div class="nft-card">
                    <img 
                        src="images/80.jpg" 
                        alt="NFT 80 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_80">NFT 80</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(80)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 80</button>
                </div>
            </div>
            
            <div class="section-content" data-translate="section3_2">
                La progettazione architettonica √® stata affidata a un team d'eccellenza guidato dall'arch. Angelo Ingrosso e dall'ing. Pietro Licignano, che hanno sviluppato una concezione innovativa degli spazi sanitari e ricettivi. Il dott. Antonio Primiceri, in qualit√† di Responsabile dei lavori, ha coordinato l'intero processo realizzativo, mentre la direzione tecnica √® stata gestita da un triumvirato di ingegneri esperti: ing. Donato Nocco, ing. Pietro Licignano e ing. Roberto Paladini, garantendo la massima qualit√† esecutiva e il rispetto delle normative pi√π stringenti.
            </div>
            
            <div class="grid-row">
                <div class="nft-card">
                    <img 
                        src="images/85.jpg" 
                        alt="NFT 85 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_85">NFT 85</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(85)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 85</button>
                </div>
                <div class="nft-card">
                    <img 
                        src="images/90.jpg" 
                        alt="NFT 90 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_90">NFT 90</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(90)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 90</button>
                </div>
            </div>
            
            <div class="section-content" data-translate="section3_3">
                L'aspetto strutturale del complesso √® stato sviluppato dagli ingegneri Donato Nocco e Livio Calo', che hanno progettato una struttura all'avanguardia capace di coniugare sicurezza sismica, sostenibilit√† ambientale e funzionalit√† operativa. La progettazione impiantistica √® stata affidata a un team specializzato di periti industriali: Antonio Laurenti, Piero Romano, Giuseppe Serafino, Sandro Ciurlia e Giuseppe Martella, che hanno integrato le pi√π moderne tecnologie per climatizzazione, impianti medicali e sistemi di automazione, creando un ecosistema tecnologico d'eccellenza.
            </div>
            
            <div class="grid-row">
                <div class="nft-card">
                    <img 
                        src="images/95.jpg" 
                        alt="NFT 95 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_95">NFT 95</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(95)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 95</button>
                </div>
                <div class="nft-card">
                    <img 
                        src="images/100.jpg" 
                        alt="NFT 100 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_100">NFT 100</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(100)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 100</button>
                </div>
            </div>
            
            <div class="section-content" data-translate="section3_4">
                Il coordinamento della sicurezza durante l'esecuzione √® stato affidato all'ing. Roberto Paladini, che ha implementato protocolli di sicurezza innovativi per un cantiere di tale complessit√†. La fase di collaudo finale √® stata gestita dagli ingegneri Vito Morciano e Giuseppe Bruno, che hanno certificato la conformit√† dell'opera secondo gli standard pi√π elevati. Il progetto ha beneficiato del supporto tecnico del Protocollo Itaca Puglia 2011-2017, garantendo la sostenibilit√† ambientale e l'efficienza energetica della struttura secondo le pi√π avanzate normative europee.
            </div>
            
            <div class="grid-row">
                <div class="nft-card">
                    <img 
                        src="images/05.jpg" 
                        alt="NFT 5 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_5">NFT 5</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(5)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 5</button>
                </div>
                <div class="nft-card">
                    <img 
                        src="images/10.jpg" 
                        alt="NFT 10 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_10">NFT 10</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(10)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 10</button>
                </div>
            </div>
            
            <div class="section-content" data-translate="section3_5">
                Il finanziamento del progetto rappresenta un esempio virtuoso di collaborazione tra istituzioni pubbliche e private. La Regione Puglia ha contribuito attraverso il Programma Operativo Puglia FESR 2014-2020, riconoscendo la valenza strategica dell'iniziativa per lo sviluppo del territorio. Monte dei Paschi Siena e Capital Service di Firenze hanno fornito il supporto finanziario specializzato, mentre Banca Popolare Pugliese e Banca di Credito Cooperativo di Terra d'Otranto hanno garantito il sostegno creditizio territoriale, dimostrando la fiducia del sistema bancario locale nel progetto.
            </div>
            
            <div class="grid-row">
                <div class="nft-card">
                    <img 
                        src="images/15.jpg" 
                        alt="NFT 15 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_15">NFT 15</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(15)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 15</button>
                </div>
                <div class="nft-card">
                    <img 
                        src="images/20.jpg" 
                        alt="NFT 20 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_20">NFT 20</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(20)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 20</button>
                </div>
            </div>
            
            <div class="section-content" data-translate="section3_6">
                La realizzazione di Life Healthcare International ha richiesto oltre un decennio di lavoro, dall'ideazione alla finalizzazione, coinvolgendo decine di famiglie di investitori che hanno creduto nella visione di una sanit√† integrata e sostenibile. Il progetto rappresenta un investimento complessivo di 10 milioni di euro, distribuiti su una superficie di 4.000 metri quadrati sviluppati su 7 piani, posizionandosi strategicamente di fronte ai principali poli ospedalieri di Lecce per garantire la massima sinergia con il sistema sanitario regionale.
            </div>
            
            <div class="grid-row">
                <div class="nft-card">
                    <img 
                        src="images/25.jpg" 
                        alt="NFT 25 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_25">NFT 25</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(25)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 25</button>
                </div>
                <div class="nft-card">
                    <img 
                        src="images/30.jpg" 
                        alt="NFT 30 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_30">NFT 30</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(30)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 30</button>
                </div>
            </div>
            
            <div class="section-content" data-translate="section3_7">
                Oggi Life Healthcare International si propone come punto di riferimento nell'healthcare innovation, integrando tradizione medica e tecnologie avanzate. Il progetto NFT rappresenta l'evoluzione naturale di questa visione pionieristica, trasformando l'heritage costruttivo e professionale in asset digitali che permettono a una community globale di partecipare al futuro dell'healthcare sostenibile. Ogni token racchiude il valore del lavoro di tutti i professionisti, istituzioni e partner che hanno reso possibile questa eccellenza pugliese, offrendo agli investitori un legame tangibile con un progetto che continua a evolversi verso nuovi orizzonti di innovazione sanitaria e sociale.
            </div>
            
            <div class="grid-row">
                <div class="nft-card">
                    <img 
                        src="images/35.jpg" 
                        alt="NFT 35 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_35">NFT 35</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(35)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 35</button>
                </div>
                <div class="nft-card">
                    <img 
                        src="images/40.jpg" 
                        alt="NFT 40 - Contributo ricerca scientifica depressione - LHI Lecce" 
                        loading="lazy" 
                        decoding="async"
                        width="200" 
                        height="200">
                    <p data-translate="nft_40">NFT 40</p>
                    <button class="mint-individual-btn" onclick="scrollToMintSection(40)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 40</button>
                </div>
            </div>
        </section>
    <div class="section-title">4. La Nostra Zecca Digitale: Sicurezza e Affidabilit√†</div>
    <div class="section-content">
        Il nostro SMART CONTRACT agisce come una <strong>ZECCA DIGITALE PRIVATA</strong>. 
        √à costruito sulla blockchain denominata Polygon usando gli strumenti software pi√π robusti e moderni, 
        e garantisce che ogni NFT sia irripetibile, non falsificabile e immutabile. 
        Monitorato h24 per essere inattaccabile da virus e malware.
    </div>
    
    <div class="section-title">5. Il Tuo NFT: Bene Unico con Certificato di Propriet√†</div>
    <div class="section-content">
        Quando clicchi il pulsante "Mint", la Zecca Digitale di LHI, crea un bene virtuale immutabile, che √® soltanto per te. Ogni comando "Mint" genera un "Certificato di Nascita" (la transazione sulla blockchain) e un "Certificato di Residenza" cio√® la sua presenza nel tuo wallet, garantendoti il pieno e verificabile possesso del tuo asset digitale. 
        
        Nessuno potr√† mai appropriarsi del tuo NFT che pu√≤ essere trasferito, scambiato con altro valore fra proprietari di wallet, oppure pu√≤ essere venduto soltanto da te, sulla rete, tramite la tua firma digitale convalidata dal tuo wallet elettronico protetto da password, impronta digitale fisica e chiave privata elettronica di 64 caratteri.
        
        <div class="grid-row">
            <div class="nft-card">
                <img 
                    src="images/75.jpg" 
                    alt="NFT 75 - Contributo ricerca scientifica depressione - LHI Lecce" 
                    loading="lazy" 
                    decoding="async"
                    width="200" 
                    height="200">
                <p data-translate="nft_75">NFT 75</p>
                <button class="mint-individual-btn" onclick="scrollToMintSection(75)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 75</button>
            </div>
            <div class="nft-card">
                <img 
                    src="images/80.jpg" 
                    alt="NFT 80 - Contributo ricerca scientifica depressione - LHI Lecce" 
                    loading="lazy" 
                    decoding="async"
                    width="200" 
                    height="200">
                <p data-translate="nft_80">NFT 80</p>
                <button class="mint-individual-btn" onclick="scrollToMintSection(80)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 80</button>
            </div>
        </div>
        
        Questo codice √® essenziale per garantire la sicurezza e l'unicit√† del tuo NFT. Senza di esso, nessuno pu√≤ accedere o trasferire il tuo asset digitale, rendendo il sistema affidabile e protetto.
    </div>

    <div class="section-title">6. Un Valore di Partecipazione Destinato a Crescere nel tempo</div>
    <div class="section-content">
        Il valore del tuo NFT √® destinato a crescere con l'eccellenza dei servizi offerti.
        LHI √® presente da tempo nell'elenco degli Hotel a 4 stelle offerto su Booking ed Espedia.
        LHI vuole essere anche un <strong>centro di sollievo dalla sofferenza</strong>, offrendo una piscina
        con acqua di mare purissima estratta a 350 metri di profondit√† per talassoterapia, sauna
        e servizi di riabilitazione. Sostenere questo progetto significa investire in un ecosistema
        di benessere reale.
    </div>

    <div class="grid-row">
        <div class="nft-card">
            <img 
                src="images/85.jpg" 
                alt="NFT 85 - Contributo ricerca scientifica depressione - LHI Lecce" 
                loading="lazy" 
                decoding="async"
                width="200" 
                height="200">
            <p data-translate="nft_85">NFT 85</p>
            <button class="mint-individual-btn" onclick="scrollToMintSection(85)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 85</button>
        </div>
        <div class="nft-card">
            <img 
                src="images/90.jpg" 
                alt="NFT 90 - Contributo ricerca scientifica depressione - LHI Lecce" 
                loading="lazy" 
                decoding="async"
                width="200" 
                height="200">
            <p data-translate="nft_90">NFT 90</p>
            <button class="mint-individual-btn" onclick="scrollToMintSection(90)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 90</button>
        </div>
    </div>

    <div class="section-title">6. Affidabilit√† e Trasparenza dei codici informatici che hanno costruito il tuo NFT tramite lo Smart Contract</div>
    <div class="section-content">
        CONTROLLA tu stesso il codice Solidity dello smart contract che √® stato
        verificato, con segno di spunta Verde, sulla piattaforma blockchain Polygonscan, 
        (protetto da Copyright) ma √®  anche  presente su GitHub,
        piattaforma mondiale ed affidabile degli sviluppatori informatici.
        <a href="https://polygonscan.com/address/0xcAD9C4EfBa776f9F55A71d442EC024BBB5DD2b1c"
           target="_blank" class="title-link">üîç Codice Trasparente del Contratto intelligente</a>
           
        <div class="grid-row">
            <div class="nft-card">
                <img 
                    src="images/95.jpg" 
                    alt="NFT 95 - Contributo ricerca scientifica depressione - LHI Lecce" 
                    loading="lazy" 
                    decoding="async"
                    width="200" 
                    height="200">
                <p data-translate="nft_95">NFT 95</p>
                <button class="mint-individual-btn" onclick="scrollToMintSection(95)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 95</button>
            </div>
            <div class="nft-card">
                <img 
                    src="images/100.jpg" 
                    alt="NFT 100 - Contributo ricerca scientifica depressione - LHI Lecce" 
                    loading="lazy" 
                    decoding="async"
                    width="200" 
                    height="200">
                <p data-translate="nft_100">NFT 100</p>
                <button class="mint-individual-btn" onclick="scrollToMintSection(100)" style="background-color: #4CAF50; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 5px;">Mint NFT 100</button>
            </div>
        </div>
    </div>



    <div class="section-title">üíº Connessione Wallet</div>
    <div class="section-content">
        <p>L'interfaccia frontend supporta la connessione tramite:</p>
        <ul>
            <li>ü¶ä <strong>MetaMask Browser Extension</strong> (modalit√† prioritaria)</li>
            <li>üì± <strong>MetaMask SDK</strong> come fallback automatico quando l'estensione non √® disponibile</li>
        </ul>
        <p>Per connetterti:</p>
        <ul>
            <li>‚úÖ Se hai installato l'estensione MetaMask nel browser, verr√† utilizzata automaticamente</li>
            <li>‚úÖ Altrimenti, il sistema caricher√† il MetaMask SDK per connessione mobile</li>
            <li>‚úÖ Configurato per <strong>Polygon Mainnet</strong> tramite Infura</li>
        </ul>
    </div>

    <div class="section-title">üåç Collegamenti e Risorse</div>
    <div class="section-content">
        <ul>
            <li>üîó Sito Web ufficiale: <a href="https://lhilecce.it" target="_blank" class="normal-link">
                https://lhilecce.it</a></li>
            <li>üó∫Ô∏è Esplora il Medical Hotel su Google Maps: <a
                href="https://www.google.com/maps/place/LHI+HEALTHY+HUB/@40.3320047,18.1613206,3a,75y,90t/data=!3m8!1e2!3m6!1shttps:%2F%2Fimages.trvl-media.com%2Flodging%2F113000000%2F112930000%2F112928700%2F112928681%2Fee2855ab_z.jpg!2e7!3e27!6shttps:%2F%2Flh3.googleusercontent.com%2Fgps-proxy%2FALd4DhF-dXaxC9wKd6uJHPxdWL6vw_X3XmLpxRMoSbGJ5CXiAaPOiD1ec4Ny9QV3kNHK4ROP9b9-82bWdRnEqKvaEJZyntSHWbzuBQJRjXD218BY6r94S5iwa8M55cP6zVNvqhInjbGawKNeBGDaPCTOr_PozblIctnFUyJa186qtE-zgmmCw21K_TUn%3Dw203-h135-k-no!7i1000!8i667!4m10!3m9!1s0x13442fc918b6d029:0x8ec95204297a6e3!5m2!4m1!1i2!8m2!3d40.3318171!4d18.1616302!10e5!16s%2Fg%2F11px8gr_q0?entry=ttu" target="_blank" class="normal-link">
                Esplora il Medical Hotel con Google Maps</a></li>
        </ul>
    </div>

    <div class="section-title">üß† Autore</div>
    <div class="section-content">
        <p>Avv. Marcello Stanca ‚Äì <a href="https://github.com/avvstancamarcello" target="_blank" class="normal-link">GitHub</a></p>
        <p>‚ÄúNon chi comincia, ma quel che persevera.‚Äù üáÆüáπ</p>
        <p><strong>Copyright ¬© Giugno 2025 Avv. Marcello Stanca - Firenze.</strong></p>

    </div>

    <div style="line-height: 1.2; margin-top: 20px;">
        <p style="margin: 15px 0 10px 0;"><strong>üë• Team e Collaboratori</strong></p>
        <p style="margin: 3px 0;">Presidente del CdA: Dott.ssa Cinzia Colizzi (Dottore Commercialista)</p>
        <p style="margin: 3px 0;">Responsabile dei lavori: dott. Antonio Primiceri</p>
        <p style="margin: 3px 0;">Direttore dei Lavori: ing. Donato Nocco, ing. Pietro Licignano, ing. Roberto Paladini</p>
        <p style="margin: 3px 0;">Coordinatore Sicurezza Esecuzione: ing. Roberto Paladini</p>
        <p style="margin: 3px 0;">Progettisti Architettonici: arch. Angelo Ingrosso, ing. Pietro Licignano</p>
        <p style="margin: 3px 0;">Progettisti Strutture: ing. Donato Nocco e ing. Livio Calo'</p>
        <p style="margin: 3px 0;">Progettisti Impianti: p.ti ind.li Antonio Laurenti, Piero Romano, Giuseppe Serafino, Sandro Ciurlia, Giuseppe Martella</p>
        <p style="margin: 3px 0;">Collaudatori: ing. Vito Morciano, ing. Giuseppe Bruno</p>
        
        <p style="margin: 15px 0 10px 0;"><strong>üí∞ Partner Finanziari</strong></p>
        <p style="margin: 3px 0;">Contributo Regione Puglia programma Operativo Puglia FESR 2014-2020, Monte dei Paschi Siena, Capital Service di Firenze</p>
        <p style="margin: 3px 0;">Banca Popolare Pugliese, Banca di Credito Cooperativo di Terra d'Otranto. Supporto tecnico Protocollo Itaca Puglia 2011-2017</p>
    </div>

    <div class="normal-text">
        <p>üôè Grazie ancora per la tua visita! Lascia un feedback!</p>
    </div> 

    <div class="normal-text">
         <p>¬© <strong>Copyright</strong> Avv. Marcello Stanca - Firenze - Giugno 2024</p>
    </div>
    
    <!-- SEZIONE FUNGIBLE TOKEN (FT) ERC-20 -->
    <div class="mint-box ft-box">
        <h3 class="section-title" style="color: white;">ü™ô Acquista Token FT LHI (ERC-20)</h3>
        <p style="color: white;">Token fungibili per partecipare all'ecosistema LHI con pagamento in POL (Polygon)</p>
        <div>
            <label for="ft-amount" style="color: white; font-weight: bold;">Quantit√† Token:</label>
            <input type="number" id="ft-amount" class="ft-input" min="1" max="1000" value="10" placeholder="10">
        </div>
        <div id="ft-price-display" style="color: white; font-weight: bold; margin: 10px 0;">
            Prezzo: 0.02 POL (‚âà $0.02)
        </div>
        <button 
            id="buy-ft-btn" 
            type="button"
            disabled 
            aria-label="Acquista token fungibili LHI"
            style="background-color: #2E7D32;">
            Acquista Token FT
        </button>
        <div id="ft-status" style="margin-top: 10px; color: white;"></div>
    </div>
    
    <!-- SEZIONE NFT -->
    <div class="mint-box nft-box">
    <h3 class="section-title">Mint il Tuo NFT Scientifico!</h3>
    <img 
        src="images/STOP_DEPRESSION_LHI.jpg" 
        alt="NFT Scientifico Stop Depression - LHI Lecce" 
        loading="lazy" 
        decoding="async"
        width="180" 
        height="180">
    <p>Sostieni la ricerca medica acquistando un NFT unico.</p>
    
    <!-- Menu a tendina per selezione Token ID -->
    <div style="margin: 15px 0;">
        <label for="token-id-select" style="font-weight: bold; margin-bottom: 5px; display: block;">
            Scegli valore NFT (Token ID):
        </label>
        <select 
            id="token-id-select" 
            aria-label="Seleziona Token ID NFT"
            style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; width: 200px;">
            <option value="5">NFT 5 (0.20 POL)</option>
            <option value="10">NFT 10 (0.40 POL)</option>
            <option value="15">NFT 15 (0.60 POL)</option>
            <option value="20">NFT 20 (0.80 POL)</option>
            <option value="25">NFT 25 (1.00 POL)</option>
            <option value="30">NFT 30 (1.20 POL)</option>
            <option value="35">NFT 35 (1.40 POL)</option>
            <option value="40">NFT 40 (1.60 POL)</option>
            <option value="45">NFT 45 (1.80 POL)</option>
            <option value="50">NFT 50 (2.00 POL)</option>
            <option value="55">NFT 55 (2.20 POL)</option>
            <option value="60">NFT 60 (2.40 POL)</option>
            <option value="65">NFT 65 (2.60 POL)</option>
            <option value="70">NFT 70 (2.80 POL)</option>
            <option value="75">NFT 75 (3.00 POL)</option>
            <option value="80">NFT 80 (3.20 POL)</option>
            <option value="85">NFT 85 (3.40 POL)</option>
            <option value="90">NFT 90 (3.60 POL)</option>
            <option value="95">NFT 95 (3.80 POL)</option>
            <option value="100">NFT 100 (4.00 POL)</option>
        </select>
    </div>
    
    <!-- Menu a tendina per quantit√† -->
    <div style="margin: 15px 0;">
        <label for="quantity-select" style="font-weight: bold; margin-bottom: 5px; display: block;">Scegli quantit√†:</label>
        <select id="quantity-select" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; width: 200px;">
            <option value="1">1 NFT</option>
            <option value="2">2 NFT</option>
            <option value="3">3 NFT</option>
            <option value="4">4 NFT</option>
            <option value="5">5 NFT</option>
            <option value="6">6 NFT</option>
            <option value="7">7 NFT</option>
            <option value="8">8 NFT</option>
            <option value="9">9 NFT</option>
            <option value="10">10 NFT</option>
        </select>
    </div>
    
    <!-- Display prezzo totale -->
    <div id="total-price-display" style="margin: 15px 0; font-weight: bold; color: #2E7D32; font-size: 1.1em;">
        Prezzo Totale: 0.20 POL
    </div>
    
    <!-- Spie di stato visive -->
    <div id="status-indicators" style="margin-bottom: 20px; padding: 15px; background-color: #f5f5f5; border-radius: 8px; border-left: 4px solid #ccc;">
        <h4 style="margin: 0 0 10px 0; color: #333;">üîç Stato Connessione</h4>
        <div id="connection-status" style="display: flex; align-items: center; margin-bottom: 10px;">
            <div id="connection-light" style="width: 12px; height: 12px; border-radius: 50%; background-color: #ff4444; margin-right: 10px; box-shadow: 0 0 10px rgba(255,68,68,0.5);"></div>
            <span id="connection-text">‚ùå Wallet non connesso</span>
        </div>
        <div id="mint-status" style="display: flex; align-items: center; margin-bottom: 10px;">
            <div id="mint-light" style="width: 12px; height: 12px; border-radius: 50%; background-color: #ffaa00; margin-right: 10px; box-shadow: 0 0 10px rgba(255,170,0,0.5);"></div>
            <span id="mint-text">‚è≥ Pronto per mint</span>
        </div>
        <div id="debug-log" style="background-color: #000; color: #00ff00; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 120px; overflow-y: auto;">
            <div>üíª Sistema di debug attivo...</div>
        </div>
    </div>

    <!-- Barra di progresso -->
    <div id="progressContainer">
        <div id="progressBar"></div>
    </div>

    <button 
        id="connect-btn" 
        type="button"
        aria-label="Connetti wallet MetaMask per acquistare NFT"
        style="margin-bottom: 16px; padding: 10px 24px; background-color: #ff9800; color: white; border: none; border-radius: 6px; font-size: 1.1em; cursor: pointer;">
        Connetti Wallet
    </button>
    <button 
        id="interactive-mint-btn" 
        type="button"
        disabled
        aria-label="Acquista NFT selezionato dal menu">
        Mint NFT Selezionato!
    </button>
    </div>

    <!-- Caricamento asincrono ottimizzato -->
    <script>
    // ===== GESTORE CARICAMENTO LIBRERIE =====
    (function() {
        window.ethersLoaded = false;
        window.metamaskLoaded = false;
        window.abiLoaded = false;
        
        // Determina ambiente per logging
        const isProd = window.location.hostname === 'avvstancamarcello.github.io';
        
        // Timeout per rilevare librerie non caricate
        const LOAD_TIMEOUT = 10000; // 10 secondi
        let timeoutId = setTimeout(function() {
            if (!window.ethersLoaded || !window.metamaskLoaded || !window.abiLoaded) {
                if (!isProd) {
                    console.error('‚ùå Timeout caricamento librerie');
                    console.log('Status:', {
                        ethers: window.ethersLoaded,
                        metamask: window.metamaskLoaded,
                        abi: window.abiLoaded
                    });
                }
                alert('Errore di caricamento!\n\nAlcune librerie non sono state caricate.\nRicarica la pagina o verifica la connessione internet.');
            }
        }, LOAD_TIMEOUT);
        
        window.checkLibrariesLoaded = function() {
            if (window.ethersLoaded && window.metamaskLoaded && window.abiLoaded) {
                clearTimeout(timeoutId);
                if (!isProd) {
                    console.log('‚úÖ Tutte le librerie caricate correttamente');
                }
                document.dispatchEvent(new Event('librariesReady'));
            }
        };
        
        window.handleScriptError = function(scriptName) {
            clearTimeout(timeoutId);
            if (!isProd) {
                console.error('‚ùå Errore caricamento:', scriptName);
            }
            alert('Errore critico!\n\nImpossibile caricare: ' + scriptName + '\n\nVerifica la connessione internet e ricarica la pagina.');
        };
    })();
    </script>
    
    <!-- NO defer su MetaMask SDK per garantire disponibilit√† immediata -->
    <script src="https://cdn.jsdelivr.net/npm/@metamask/sdk/dist/browser/umd/metamask-sdk.js" onload="window.metamaskLoaded = true; checkLibrariesLoaded();" onerror="handleScriptError('MetaMask SDK')"></script>
    
    <!-- Ethers.js v6 -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js" async onload="window.ethersLoaded = true; checkLibrariesLoaded();" onerror="handleScriptError('ethers.js')"></script>
    
    <!-- ABI contratti -->
    <script src="abi.js" async onload="window.abiLoaded = true; checkLibrariesLoaded();" onerror="handleScriptError('abi.js')"></script>

    <script>
    // ===== CONFIGURAZIONE GLOBALE =====
    const CLIENT_ID = document.querySelector('meta[name="clientID"]')?.content || '';
    const INFURA_URL = document.querySelector('meta[name="infuraURL"]')?.content || '';
    // Infura API Key estratto dal meta tag (non usato nell'SDK, solo per riferimento)
    const INFURA_API_KEY = INFURA_URL.split('/').pop() || '';
    const CONTRACT_ADDRESS = "0xEC023A57E96E0a94E30EB9892F05fC002A545aA5";
    const FT_CONTRACT_ADDRESS = "0xF96ab75dEf75945e3E4a62E918468d49DaC97598";
    const FT_PRICE_POL = "0.02";
    const POLYGON_CHAIN_ID = '0x89'; // 137 in decimale
    const NFT_PRICE_PER_TOKEN_ID = 0.04; // Prezzo per ogni unit√† di token ID (es. NFT 5 = 5 * 0.04 = 0.20 POL)

    // Determina ambiente (DEVE essere definito PRIMA di initializeMetaMaskSDK)
    const IS_PRODUCTION = window.location.hostname === 'avvstancamarcello.github.io';

    let provider;
    let signer;
    let contractInstance;
    let ftContractInstance;
    let walletConnected = false;
    let currentAccount = null;
    let sdkInstance = null; // Store SDK instance for reuse
    let sdkInitializing = false; // Prevent concurrent SDK initialization

    // ===== INIZIALIZZAZIONE METAMASK SDK =====
    /**
     * Inizializza MetaMask SDK con gestione corretta degli errori
     * @returns {Promise<Object|null>} L'istanza SDK o null in caso di errore
     */
    async function initializeMetaMaskSDK() {
        if (sdkInstance || sdkInitializing) return sdkInstance;
        
        sdkInitializing = true;
        
        try {
            if (typeof MetaMaskSDK === 'undefined' || !MetaMaskSDK.MetaMaskSDK) {
                if (!IS_PRODUCTION) {
                    console.warn('‚ö†Ô∏è MetaMaskSDK non disponibile');
                }
                return null;
            }
            
            const options = {
                dappMetadata: {
                    name: 'LHISA NFT - Medical Research',
                    url: window.location.href
                },
                checkInstallationImmediately: false,
                developerMode: !IS_PRODUCTION
            };
            
            sdkInstance = new MetaMaskSDK.MetaMaskSDK(options);
            await sdkInstance.init();
            
            if (!IS_PRODUCTION) {
                console.log('‚úÖ MetaMask SDK inizializzato:', sdkInstance);
            }
            
            return sdkInstance;
        } catch (error) {
            if (!IS_PRODUCTION) {
                console.error('‚ùå Errore inizializzazione SDK:', error);
            }
            return null;
        } finally {
            sdkInitializing = false;
        }
    }

    // ===== PROGRESS BAR HELPERS =====
    /**
     * Shows and animates the progress bar
     */
    function startProgress() {
        const container = document.getElementById("progressContainer");
        const bar = document.getElementById("progressBar");
        if (!container || !bar) return;
        
        container.style.display = "block";
        bar.style.width = "0%";

        let progress = 0;
        const interval = setInterval(() => {
            progress += 10;
            bar.style.width = progress + "%";
            if (progress >= 100) clearInterval(interval);
        }, 300);
        
        // Store interval ID for cleanup
        container.dataset.intervalId = interval;
    }

    /**
     * Resets and hides the progress bar
     */
    function resetProgress() {
        const container = document.getElementById("progressContainer");
        const bar = document.getElementById("progressBar");
        if (!container || !bar) return;
        
        // Clear any running interval
        if (container.dataset.intervalId) {
            clearInterval(parseInt(container.dataset.intervalId));
            delete container.dataset.intervalId;
        }
        
        bar.style.width = "0%";
        container.style.display = "none";
    }

    // ===== ANALYTICS =====
    let analytics = {
        visits: 0,
        walletConnects: 0,
        mints: 0,
        mintAttempts: 0,
        errors: [],
        events: []
    };

    function initAnalytics() {
        try {
            const stored = localStorage.getItem('lhisa_analytics');
            if (stored) {
                const parsed = JSON.parse(stored);
                Object.assign(analytics, parsed);
            }
        } catch (e) {
            log('‚ö†Ô∏è Errore caricamento analytics, reset dati', true);
            Object.assign(analytics, { visits: 0, walletConnects: 0, mints: 0, mintAttempts: 0, errors: [], events: [] });
        }
        analytics.visits++;
        saveAnalytics();
        log(`üìä Visite totali: ${analytics.visits}`);
    }

    function saveAnalytics() {
        localStorage.setItem('lhisa_analytics', JSON.stringify(analytics));
    }

    function trackEvent(name, data = {}) {
        const event = {
            name,
            data,
            timestamp: new Date().toISOString()
        };
        analytics.events.push(event);
        // Mantieni solo ultimi 50 eventi per evitare crescita eccessiva
        if (analytics.events.length > 50) {
            analytics.events.shift();
        }
        if (!IS_PRODUCTION) {
            console.log('üìà Event:', name, data);
        }
        saveAnalytics();
    }

    // Export per admin (solo analytics aggregati, nessun dato sensibile)
    window.exportAnalytics = () => {
        if (!IS_PRODUCTION) {
            console.log('Analytics:', analytics);
        }
        const blob = new Blob([JSON.stringify(analytics, null, 2)], {type: 'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `analytics_${Date.now()}.json`;
        a.click();
        log('üì• Analytics esportati');
    };

    // ===== PERFORMANCE MONITOR =====
    class PerformanceMonitor {
        constructor() {
            this.metrics = {};
            this.measurePageLoad();
        }
        
        measurePageLoad() {
            window.addEventListener('load', () => {
                setTimeout(() => {
                    // Use modern Performance API
                    const perfData = performance.getEntriesByType('navigation')[0];
                    if (perfData) {
                        const loadTime = perfData.loadEventEnd - perfData.fetchStart;
                        this.metrics.pageLoad = loadTime;
                        log(`‚ö° Caricamento: ${(loadTime/1000).toFixed(2)}s`);
                        
                        if (loadTime > 3000) {
                            log('‚ö†Ô∏è Caricamento lento', true);
                        }
                    } else if (performance.timing) {
                        // Fallback per browser pi√π vecchi
                        const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                        this.metrics.pageLoad = loadTime;
                        log(`‚ö° Caricamento: ${(loadTime/1000).toFixed(2)}s`);
                        
                        if (loadTime > 3000) {
                            log('‚ö†Ô∏è Caricamento lento', true);
                        }
                    }
                }, 0);
            });
        }
        
        async measure(name, fn) {
            const start = performance.now();
            try {
                const result = await fn();
                const duration = performance.now() - start;
                this.metrics[name] = duration;
                log(`‚è±Ô∏è ${name}: ${duration.toFixed(0)}ms`);
                return result;
            } catch (error) {
                log(`‚ùå ${name} fallito`, true);
                throw error;
            }
        }
    }

    const perfMonitor = new PerformanceMonitor();

    // ===== ERROR BOUNDARY =====
    let errorCount = 0;

    window.addEventListener('error', (e) => {
        errorCount++;
        analytics.errors.push({
            msg: e.message,
            time: new Date().toISOString()
        });
        saveAnalytics();
        log(`üö® Errore: ${e.message}`, true);
        
        if (errorCount > 10) {
            log('‚ùå Troppi errori. Ricaricare pagina.', true);
        }
    });

    window.addEventListener('unhandledrejection', (e) => {
        log(`üö® Promise rejected: ${e.reason}`, true);
    });

    // ===== STORAGE MANAGER =====
    const storage = {
        set(key, value) {
            try {
                const item = {
                    data: value,
                    timestamp: Date.now()
                };
                localStorage.setItem('lhisa_' + key, JSON.stringify(item));
                return true;
            } catch (e) {
                log('‚ùå Storage pieno', true);
                this.cleanup();
                return false;
            }
        },
        
        get(key) {
            try {
                const item = localStorage.getItem('lhisa_' + key);
                if (!item) return null;
                const parsed = JSON.parse(item);
                // Support both old format (direct data) and new format (with timestamp)
                return parsed.data !== undefined ? parsed.data : parsed;
            } catch (e) {
                return null;
            }
        },
        
        cleanup() {
            log('üßπ Pulizia storage...');
            const keysToRemove = [];
            
            // Prima raccogli le chiavi da rimuovere
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && key.startsWith('lhisa_')) {
                    try {
                        const item = JSON.parse(localStorage.getItem(key));
                        // Rimuovi se pi√π vecchio di 30 giorni
                        if (item && item.timestamp) {
                            const age = Date.now() - item.timestamp;
                            if (age > 30 * 24 * 60 * 60 * 1000) {
                                keysToRemove.push(key);
                            }
                        }
                    } catch (e) {
                        // Skip malformed items
                    }
                }
            }
            
            // Poi rimuovi le chiavi
            keysToRemove.forEach(key => {
                localStorage.removeItem(key);
                log(`üóëÔ∏è Rimosso: ${key}`);
            });
        }
    };

    // ===== CONFIGURAZIONE AMBIENTE (gi√† definito sopra, ma applica le regole qui) =====
    // Nascondi debug log in produzione
    if (IS_PRODUCTION) {
        const debugLogContainer = document.getElementById('debug-log');
        if (debugLogContainer) {
            debugLogContainer.style.display = 'none';
        }
    }

    // Mostra indicatore solo in sviluppo
    if (!IS_PRODUCTION) {
        document.getElementById('env-indicator').style.display = 'block';
    }

    // ===== TEST DI CARICAMENTO LIBRERIE =====
    if (!IS_PRODUCTION) {
        console.log('üîß TEST CARICAMENTO LIBRERIE:');
        console.log('‚úÖ Ethers disponibile:', typeof ethers !== 'undefined');
        console.log('‚úÖ MetaMask SDK disponibile:', typeof MetaMaskSDK !== 'undefined');
        console.log('‚úÖ window.ethereum disponibile:', typeof window.ethereum !== 'undefined');
    }

    // ===== HELPER FUNCTIONS FOR PROVIDER AND SIGNER =====
    /**
     * Get the current provider instance
     * @returns {Object} The provider object
     * @throws {Error} If provider is not initialized
     */
    function getProvider() {
        if (!provider) {
            throw new Error('Provider non inizializzato. Connetti il wallet prima.');
        }
        return provider;
    }

    /**
     * Get the current signer instance
     * @returns {Object} The signer object
     * @throws {Error} If signer is not initialized
     */
    function getSigner() {
        if (!signer) {
            throw new Error('Signer non inizializzato. Connetti il wallet prima.');
        }
        return signer;
    }

    // ===== FUNZIONI DI LOG E STATUS =====
    function log(message, isError = false) {
        // Console log SOLO in sviluppo
        if (!IS_PRODUCTION) {
            if (isError) {
                console.error(message);
            } else {
                console.log(message);
            }
            
            // Debug visivo in ambiente di sviluppo
            const debugLog = document.getElementById('debug-log');
            if (debugLog) {
                const timestamp = new Date().toLocaleTimeString('it-IT');
                const logEntry = document.createElement('div');
                logEntry.innerHTML = `[${timestamp}] ${message}`;
                if (isError) logEntry.style.color = '#ff4444';
                debugLog.appendChild(logEntry);
                debugLog.scrollTop = debugLog.scrollHeight;
                
                // Mantieni solo ultimi 10 messaggi
                while (debugLog.children.length > 10) {
                    debugLog.removeChild(debugLog.firstChild);
                }
            }
        }
    }
    
    function updateConnectionStatus(connected, message) {
        const light = document.getElementById('connection-light');
        const text = document.getElementById('connection-text');
        
        if (connected) {
            light.style.backgroundColor = '#44ff44';
            light.style.boxShadow = '0 0 15px rgba(68,255,68,0.8)';
            text.innerHTML = '‚úÖ ' + message;
            text.style.color = '#2E7D32';
        } else {
            light.style.backgroundColor = '#ff4444';
            light.style.boxShadow = '0 0 10px rgba(255,68,68,0.5)';
            text.innerHTML = '‚ùå ' + message;
            text.style.color = '#D32F2F';
        }
    }
    
    function updateMintStatus(status, message) {
        const light = document.getElementById('mint-light');
        const text = document.getElementById('mint-text');
        
        switch(status) {
            case 'ready':
                light.style.backgroundColor = '#44ff44';
                light.style.boxShadow = '0 0 15px rgba(68,255,68,0.8)';
                text.innerHTML = '‚úÖ ' + message;
                text.style.color = '#2E7D32';
                break;
            case 'working':
                light.style.backgroundColor = '#ffaa00';
                light.style.boxShadow = '0 0 15px rgba(255,170,0,0.8)';
                text.innerHTML = '‚è≥ ' + message;
                text.style.color = '#F57C00';
                break;
            case 'error':
                light.style.backgroundColor = '#ff4444';
                light.style.boxShadow = '0 0 10px rgba(255,68,68,0.5)';
                text.innerHTML = '‚ùå ' + message;
                text.style.color = '#D32F2F';
                break;
        }
    }

    // ===== VERIFICA E CAMBIO RETE POLYGON =====
    async function checkAndSwitchToPolygon() {
        try {
            const currentChainId = await provider.request({ method: 'eth_chainId' });
            log(`üåê Rete corrente: ${currentChainId} (${parseInt(currentChainId, 16)})`);
            
            if (currentChainId !== POLYGON_CHAIN_ID) {
                log('‚ö†Ô∏è Sei su una rete sbagliata. Cambio a Polygon...', true);
                
                try {
                    await provider.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: POLYGON_CHAIN_ID }],
                    });
                    log('‚úÖ Passato a Polygon Mainnet con successo');
                    return true;
                } catch (switchError) {
                    if (switchError.code === 4902) {
                        log('üìù Polygon non trovata, la aggiungo...');
                        try {
                            await provider.request({
                                method: 'wallet_addEthereumChain',
                                params: [{
                                    chainId: POLYGON_CHAIN_ID,
                                    chainName: 'Polygon Mainnet',
                                    nativeCurrency: {
                                        name: 'POL',
                                        symbol: 'POL',
                                        decimals: 18
                                    },
                                    rpcUrls: [INFURA_URL],
                                    blockExplorerUrls: ['https://polygonscan.com/']
                                }],
                            });
                            log('‚úÖ Polygon Mainnet aggiunta con successo');
                            return true;
                        } catch (addError) {
                            log('‚ùå Errore aggiunta Polygon: ' + addError.message, true);
                            throw new Error('Impossibile aggiungere Polygon a MetaMask');
                        }
                    }
                    throw new Error('Cambio rete rifiutato: ' + switchError.message);
                }
            }
            
            log('‚úÖ Gi√† connesso a Polygon Mainnet');
            return true;
        } catch (error) {
            log('‚ùå Errore verifica rete: ' + error.message, true);
            return false;
        }
    }

    // ===== CONNESSIONE WALLET CON PRIORIT√Ä ESTENSIONE BROWSER =====
    async function connectWallet() {
        const connectBtn = document.getElementById('connect-btn');
        const originalText = connectBtn.textContent;
        
        if (walletConnected) {
            alert("‚úÖ Wallet gi√† connesso!");
            return;
        }
        
        updateConnectionStatus(false, "Connessione in corso...");
        updateMintStatus('working', 'In attesa di connessione...');
        startProgress(); // Show progress bar
        
        try {
            log("üöÄ Avvio connessione wallet...");
            
            // Update button to connecting state
            connectBtn.textContent = '‚è≥ Connessione...';
            connectBtn.disabled = true;

            // ‚úÖ PRIORIT√Ä 1: Usa estensione browser MetaMask o altri wallet
            if (typeof window.ethereum !== 'undefined') {
                log('‚úÖ Provider iniettato rilevato nel browser');
                
                // Check if MetaMask is available
                if (window.ethereum.isMetaMask) {
                    provider = window.ethereum;
                    log('‚úÖ Confermata estensione MetaMask ufficiale');
                }
                // Check if Coinbase Wallet is available
                else if (window.ethereum.isCoinbaseWallet) {
                    provider = window.ethereum;
                    log('‚úÖ Coinbase Wallet rilevato');
                }
                // Use generic injected provider
                else {
                    provider = window.ethereum;
                    log('‚úÖ Wallet generico rilevato (supportato)');
                }
            }
            // ‚úÖ PRIORIT√Ä 2: Carica MetaMask SDK come fallback
            else {
                log('‚è≥ Nessuna estensione rilevata, carico MetaMask SDK...');
                
                // Ensure SDK is initialized before attempting connection
                if (!sdkInstance) {
                    log('ü¶ä Inizializzazione MetaMask SDK prima della connessione...');
                    await initializeMetaMaskSDK();
                }
                
                if (typeof MetaMaskSDK === 'undefined' || !MetaMaskSDK.MetaMaskSDK) {
                    throw new Error('‚ùå MetaMask SDK non caricato. Installa MetaMask o ricarica la pagina.');
                }
                
                if (!sdkInstance) {
                    throw new Error('‚ùå Impossibile inizializzare MetaMask SDK.');
                }

                provider = sdkInstance.getProvider();
                
                if (!provider) {
                    throw new Error('‚ùå MetaMask SDK non ha restituito un provider valido.');
                }
                
                log('‚úÖ MetaMask SDK caricato con successo');
            }

            if (!provider) {
                throw new Error('‚ùå Nessun provider disponibile. Installa MetaMask.');
            }

            // Richiedi connessione account
            log('üì° Richiesta connessione account...');
            const accounts = await provider.request({ 
                method: 'eth_requestAccounts' 
            });
            
            if (!accounts || accounts.length === 0) {
                throw new Error("Nessun account trovato. Sblocca MetaMask e riprova.");
            }
            
            currentAccount = accounts[0];
            log(`‚úÖ Account connesso: ${currentAccount.slice(0, 10)}...${currentAccount.slice(-4)}`);

            // Verifica e cambia rete se necessario
            const networkOk = await checkAndSwitchToPolygon();
            if (!networkOk) {
                throw new Error('Impossibile connettersi a Polygon');
            }

            // Inizializza ethers.js con check di disponibilit√†
            if (typeof ethers === 'undefined' || !ethers.BrowserProvider) {
                throw new Error('‚ùå Ethers.js non caricato correttamente. Ricarica la pagina.');
            }
            
            const ethersProvider = new ethers.BrowserProvider(provider);
            signer = await ethersProvider.getSigner();
            
            // Inizializza contratti
            const contractABI = window.CONTRACT_ABI;
            if (!contractABI || !Array.isArray(contractABI)) {
                throw new Error("ABI del contratto non caricata! Verifica che abi.js sia incluso correttamente.");
            }
            
            contractInstance = new ethers.Contract(CONTRACT_ADDRESS, contractABI, signer);
            log(`‚úÖ Contratto NFT inizializzato`);
            
            if (window.FT_CONTRACT_ABI && FT_CONTRACT_ADDRESS && FT_CONTRACT_ADDRESS !== "0x...") {
                ftContractInstance = new ethers.Contract(FT_CONTRACT_ADDRESS, window.FT_CONTRACT_ABI, signer);
                log(`‚úÖ Contratto FT inizializzato`);
            }

            walletConnected = true;
            
            // Track successful wallet connection
            analytics.walletConnects++;
            trackEvent('wallet_connect');
            
            // Aggiorna UI
            resetProgress(); // Hide progress bar on success
            updateConnectionStatus(true, `Connesso: ${currentAccount.slice(0,6)}...${currentAccount.slice(-4)}`);
            updateMintStatus('ready', 'Pronto per mint!');
            
            document.getElementById('connect-btn').textContent = '‚úÖ Wallet Connesso';
            document.getElementById('connect-btn').disabled = true;
            document.getElementById('interactive-mint-btn').disabled = false;
            
            // Abilita bottone FT solo se contratto inizializzato
            if (ftContractInstance) {
                document.getElementById('buy-ft-btn').disabled = false;
            }

            log('üéâ Connessione completata con successo!');

            // Ascolta cambio account
            provider.on('accountsChanged', handleAccountsChanged);

            // Ascolta cambio rete
            provider.on('chainChanged', handleChainChanged);

        } catch (error) {
            resetProgress(); // Hide progress bar on error
            log('‚ùå ERRORE: ' + error.message, true);
            updateConnectionStatus(false, 'Errore di connessione');
            updateMintStatus('error', 'Impossibile connettersi');
            
            // Restore button state
            connectBtn.textContent = originalText;
            connectBtn.disabled = false;
            
            // Track error
            analytics.errors.push({
                type: 'wallet_connection',
                message: error.message,
                timestamp: new Date().toISOString()
            });
            saveAnalytics();
            
            // Provide actionable error message
            let errorMsg = 'Errore di connessione:\n\n' + error.message + '\n\n';
            
            if (error.message.includes('MetaMask SDK non caricato') || error.message.includes('Nessun provider disponibile')) {
                errorMsg += 'üì± Per connetterti:\n';
                errorMsg += '1. Installa MetaMask dal tuo app store\n';
                errorMsg += '2. Oppure usa il browser con estensione MetaMask\n';
                errorMsg += '3. Link: https://metamask.io/download/';
            } else {
                errorMsg += 'Assicurati di:\n';
                errorMsg += '- Avere MetaMask installato\n';
                errorMsg += '- Essere connesso a Polygon Mainnet\n';
                errorMsg += '- Avere sbloccato il wallet';
            }
            
            alert(errorMsg);
        }
    }

    // ===== GESTIONE EVENTI =====
    function handleAccountsChanged(accounts) {
        if (accounts.length === 0) {
            log('‚ö†Ô∏è Wallet disconnesso', true);
            alert('Wallet disconnesso. Ricarica la pagina per riconnetterti.');
            setTimeout(() => location.reload(), 2000);
        } else if (accounts[0] !== currentAccount) {
            log(`üîÑ Account cambiato: ${accounts[0].slice(0, 10)}...${accounts[0].slice(-4)}`);
            alert('Account cambiato. Ricarico la pagina...');
            setTimeout(() => location.reload(), 1500);
        }
    }

    function handleChainChanged(chainId) {
        log(`üîÑ Rete cambiata: ${chainId}`);
        alert('Rete blockchain cambiata. Ricarico la pagina...');
        setTimeout(() => location.reload(), 1500);
    }

    // ===== CALCOLO PREZZO =====
    function calculateTotalPrice() {
        const tokenId = parseInt(document.getElementById('token-id-select').value);
        const quantity = parseInt(document.getElementById('quantity-select').value);
        const pricePerNFT = tokenId * NFT_PRICE_PER_TOKEN_ID;
        const totalPrice = pricePerNFT * quantity;
        
        document.getElementById('total-price-display').textContent = 
            `Prezzo Totale: ${totalPrice.toFixed(2)} POL`;
        
        return totalPrice;
    }

    // ===== VERIFICA CONTRATTO SU POLYGONSCAN =====
    async function verifyContract() {
        try {
            log('üîç Verifica contratto Polygonscan...');
            
            // Valida formato address Ethereum (0x seguito da 40 caratteri esadecimali)
            if (!CONTRACT_ADDRESS || !/^0x[a-fA-F0-9]{40}$/.test(CONTRACT_ADDRESS)) {
                log('‚ùå Indirizzo contratto non valido', true);
                return false;
            }
            
            // Crea una Promise con timeout di 10 secondi
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000);
            
            // Encode address per URL safety
            const encodedAddress = encodeURIComponent(CONTRACT_ADDRESS);
            
            const response = await fetch(
                `https://api.polygonscan.com/api?module=contract&action=getabi&address=${encodedAddress}`,
                { signal: controller.signal }
            );
            
            clearTimeout(timeoutId);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            const statusEl = document.getElementById('contract-status');
            
            if (data.status === '1') {
                log('‚úÖ Contratto verificato');
                if (statusEl) {
                    // Usa metodi DOM sicuri invece di innerHTML per prevenire XSS
                    statusEl.textContent = '';
                    statusEl.appendChild(document.createTextNode('‚úÖ '));
                    
                    const link = document.createElement('a');
                    link.href = `https://polygonscan.com/address/${encodeURIComponent(CONTRACT_ADDRESS)}#code`;
                    link.target = '_blank';
                    link.rel = 'noopener noreferrer';
                    link.setAttribute('aria-label', 'Contratto Verificato su Polygonscan - apre in una nuova scheda');
                    link.textContent = 'Contratto Verificato';
                    
                    statusEl.appendChild(link);
                    statusEl.style.color = '#28a745';
                }
                return true;
            } else {
                log('‚ö†Ô∏è Contratto non verificato');
                if (statusEl) {
                    statusEl.textContent = '‚ö†Ô∏è Contratto in attesa di verifica';
                    statusEl.style.color = '#ffa500';
                }
                return false;
            }
        } catch (error) {
            if (error.name === 'AbortError') {
                log('‚ùå Timeout verifica contratto', true);
            } else {
                log('‚ùå Errore verifica: ' + error.message, true);
            }
            return false;
        }
    }

    // ===== FUNZIONE MINT NFT =====
    /**
     * Mint NFT singolo con tokenId specificato o da UI
     * @param {number} [tokenId] - Token ID da mintare (opzionale, usa UI se non specificato)
     */
    async function mintNFT(tokenId) {
        if (!walletConnected || !contractInstance) {
            alert("‚ö†Ô∏è Devi prima connettere il wallet!");
            return;
        }

        try {
            // Se tokenId non √® fornito, leggi da UI
            const selectedTokenId = tokenId !== undefined 
                ? parseInt(tokenId) 
                : parseInt(document.getElementById('token-id-select').value);
            const quantity = parseInt(document.getElementById('quantity-select').value);
            
            // Calcola prezzo basato su tokenId e quantit√†
            const pricePerNFT = selectedTokenId * NFT_PRICE_PER_TOKEN_ID;
            const totalPrice = pricePerNFT * quantity;
            
            // Track mint attempt
            analytics.mintAttempts++;
            trackEvent('mint_attempt', {tokenId: selectedTokenId, quantity});
            
            log(`üé® Avvio mint: ${quantity}x NFT Token ID ${selectedTokenId}`);
            log(`üí∞ Costo totale: ${totalPrice.toFixed(4)} POL`);
            updateMintStatus('working', `Mintando ${quantity}x NFT ${selectedTokenId}...`);
            
            const mintBtn = document.getElementById('interactive-mint-btn');
            const originalText = mintBtn.textContent;
            mintBtn.disabled = true;
            mintBtn.textContent = '‚è≥ Transazione in corso...';
            
            startProgress(); // Show progress bar

            const valueInWei = ethers.parseEther(totalPrice.toString());
            log(`üìä Valore in Wei: ${valueInWei.toString()}`);
            
            const tx = await contractInstance.mint(
                currentAccount, 
                selectedTokenId, 
                quantity, 
                "0x",
                {
                    value: valueInWei,
                    gasLimit: 350000
                }
            );
            
            // Track mint success
            trackEvent('mint_success', {tokenId: selectedTokenId, txHash: tx.hash});
            
            log(`üìù Transazione inviata: ${tx.hash}`);
            log(`üîó Visualizza su: https://polygonscan.com/tx/${tx.hash}`);
            updateMintStatus('working', 'In attesa di conferma dalla blockchain...');
            mintBtn.textContent = '‚è≥ In attesa conferma blockchain...';
            
            const receipt = await tx.wait();
            
            // Track successful mint after confirmation
            analytics.mints++;
            
            resetProgress(); // Hide progress bar on success
            log(`‚úÖ MINT COMPLETATO!`);
            log(`üì¶ Blocco: ${receipt.blockNumber}`);
            log(`‚õΩ Gas usato: ${receipt.gasUsed.toString()}`);
            updateMintStatus('ready', `‚úÖ ${quantity}x NFT ${selectedTokenId} mintati con successo!`);
            
            mintBtn.textContent = '‚úÖ Mint Completato!';
            mintBtn.style.backgroundColor = '#2E7D32';
            
            alert(
                `üéâ NFT MINTATO CON SUCCESSO!\n\n` +
                `üì¶ Quantit√†: ${quantity}\n` +
                `üé® Token ID: ${selectedTokenId}\n` +
                `üí∞ Pagato: ${totalPrice.toFixed(4)} POL\n` +
                `üîó TX Hash: ${tx.hash.substring(0, 20)}...\n\n` +
                `Visualizza su PolygonScan:\n` +
                `https://polygonscan.com/tx/${tx.hash}`
            );
            
            setTimeout(() => {
                mintBtn.disabled = false;
                mintBtn.textContent = originalText;
                mintBtn.style.backgroundColor = '#4CAF50';
            }, 3000);
            
        } catch (error) {
            resetProgress(); // Hide progress bar on error
            log(`‚ùå ERRORE DURANTE IL MINT: ${error.message}`, true);
            updateMintStatus('error', 'Mint fallito');
            
            let errorMsg = "‚ùå Errore durante il mint:\n\n";
            
            if (error.code === 4001 || error.code === 'ACTION_REJECTED') {
                errorMsg += "Transazione rifiutata dall'utente.";
            } else if (error.code === -32603) {
                errorMsg += "Errore interno del contratto.\nPossibili cause:\n- Fondi POL insufficienti\n- NFT gi√† mintato\n- Limite superato";
            } else if (error.message.includes('insufficient funds')) {
                errorMsg += "Fondi insufficienti!\nHai abbastanza POL per il mint + gas?";
            } else if (error.message.includes('gas')) {
                errorMsg += "Errore di gas.\nProva ad aumentare il gas limit in MetaMask.";
            } else {
                errorMsg += error.message;
            }
            
            alert(errorMsg);
            
            const mintBtn = document.getElementById('interactive-mint-btn');
            mintBtn.disabled = false;
            mintBtn.textContent = 'Mint NFT Selezionato!';
            mintBtn.style.backgroundColor = '#4CAF50';
        }
    }

    // ===== FUNZIONE ACQUISTO FT =====
    async function buyFT() {
        if (!walletConnected || !ftContractInstance) {
            alert("‚ö†Ô∏è Devi prima connettere il wallet!");
            return;
        }

        try {
            const amount = parseInt(document.getElementById('ft-amount').value);
            if (isNaN(amount) || amount < 1 || amount > 1000) {
                alert("‚ö†Ô∏è Quantit√† non valida!\nInserisci un valore tra 1 e 1000.");
                return;
            }

            const totalPricePOL = (amount * parseFloat(FT_PRICE_POL)).toFixed(4);
            log(`ü™ô Acquisto di ${amount} Token FT per ${totalPricePOL} POL`);
            
            const statusEl = document.getElementById('ft-status');
            statusEl.textContent = '‚è≥ Transazione in corso...';
            statusEl.style.color = 'white';
            
            const buyBtn = document.getElementById('buy-ft-btn');
            const originalText = buyBtn.textContent;
            buyBtn.disabled = true;
            buyBtn.textContent = '‚è≥ Elaborazione...';
            
            startProgress(); // Show progress bar

            const valueInWei = ethers.parseEther(totalPricePOL);
            
            const tx = await ftContractInstance.mintLHISA(amount, {
                value: valueInWei,
                gasLimit: 200000
            });
            
            log(`üìù TX FT inviata: ${tx.hash}`);
            statusEl.textContent = '‚è≥ In attesa conferma blockchain...';
            
            const receipt = await tx.wait();
            
            resetProgress(); // Hide progress bar on success
            log(`‚úÖ Token FT acquistati! Blocco: ${receipt.blockNumber}`);
            statusEl.textContent = `‚úÖ ${amount} Token FT ricevuti con successo!`;
            
            alert(
                `üéâ TOKEN FT ACQUISTATI!\n\n` +
                `ü™ô Quantit√†: ${amount}\n` +
                `üí∞ Pagato: ${totalPricePOL} POL\n` +
                `üîó TX: ${tx.hash.substring(0, 20)}...`
            );
            
            buyBtn.textContent = '‚úÖ Acquisto Completato!';
            setTimeout(() => {
                buyBtn.disabled = false;
                buyBtn.textContent = originalText;
            }, 3000);
            
        } catch (error) {
            resetProgress(); // Hide progress bar on error
            log(`‚ùå ERRORE ACQUISTO FT: ${error.message}`, true);
            
            const statusEl = document.getElementById('ft-status');
            statusEl.textContent = '‚ùå Errore durante l\'acquisto';
            statusEl.style.color = '#ff4444';
            
            let errorMsg = "‚ùå Errore acquisto Token FT:\n\n";
            if (error.code === 4001) {
                errorMsg += "Transazione annullata.";
            } else if (error.message.includes('insufficient funds')) {
                errorMsg += "Fondi POL insufficienti!";
            } else {
                errorMsg += error.message;
            }
            
            alert(errorMsg);
            
            document.getElementById('buy-ft-btn').disabled = false;
            document.getElementById('buy-ft-btn').textContent = 'Acquista Token FT';
        }
    }

    // ===== SCROLL ALLA SEZIONE MINT =====
    function scrollToMintSection(tokenId) {
        document.getElementById('token-id-select').value = tokenId;
        calculateTotalPrice();
        document.querySelector('.mint-box.nft-box').scrollIntoView({ 
            behavior: 'smooth', 
            block: 'center' 
        });
        log(`üìç Scroll a sezione mint - Token ID ${tokenId} preselezionato`);
    }

    // ===== ALIAS PER COMPATIBILIT√Ä =====
    /**
     * Switch to Polygon network (alias for checkAndSwitchToPolygon)
     * @returns {Promise<boolean>} True if successful
     */
    async function switchToPolygon() {
        return await checkAndSwitchToPolygon();
    }

    /**
     * Mint Fungible Token with specified amount
     * @param {number} amount - Amount of FT to mint
     */
    async function mintFT(amount) {
        if (!walletConnected || !ftContractInstance) {
            alert("‚ö†Ô∏è Devi prima connettere il wallet!");
            return;
        }

        try {
            if (isNaN(amount) || amount < 1 || amount > 1000) {
                alert("‚ö†Ô∏è Quantit√† non valida!\nInserisci un valore tra 1 e 1000.");
                return;
            }

            const totalPricePOL = (amount * parseFloat(FT_PRICE_POL)).toFixed(4);
            log(`ü™ô Acquisto di ${amount} Token FT per ${totalPricePOL} POL`);
            
            updateMintStatus('working', `Mintando ${amount} Token FT...`);

            const valueInWei = ethers.parseEther(totalPricePOL);
            
            const tx = await ftContractInstance.mintLHISA(amount, {
                value: valueInWei,
                gasLimit: 200000
            });
            
            log(`üìù TX FT inviata: ${tx.hash}`);
            updateMintStatus('working', 'In attesa conferma blockchain...');
            
            const receipt = await tx.wait();
            
            log(`‚úÖ Token FT acquistati! Blocco: ${receipt.blockNumber}`);
            updateMintStatus('ready', `‚úÖ ${amount} Token FT mintati con successo!`);
            
            alert(
                `üéâ TOKEN FT MINTATI!\n\n` +
                `ü™ô Quantit√†: ${amount}\n` +
                `üí∞ Pagato: ${totalPricePOL} POL\n` +
                `üîó TX: ${tx.hash.substring(0, 20)}...`
            );
            
        } catch (error) {
            log(`‚ùå ERRORE MINT FT: ${error.message}`, true);
            updateMintStatus('error', 'Mint FT fallito');
            
            let errorMsg = "‚ùå Errore mint Token FT:\n\n";
            if (error.code === 4001 || error.code === 'ACTION_REJECTED') {
                errorMsg += "Transazione rifiutata dall'utente.";
            } else if (error.message.includes('insufficient funds')) {
                errorMsg += "Fondi POL insufficienti!";
            } else {
                errorMsg += error.message;
            }
            
            alert(errorMsg);
        }
    }

    // ===== INIZIALIZZAZIONE =====
    // Attendi che librerie siano pronte
    document.addEventListener('librariesReady', async () => {
        log('üöÄ Librerie caricate, inizializzo applicazione...');
        
        // PRE-INITIALIZE MetaMask SDK immediately
        try {
            log('ü¶ä Pre-inizializzazione MetaMask SDK...');
            await initializeMetaMaskSDK();
            log('‚úÖ MetaMask SDK pronto per la connessione');
        } catch (error) {
            log('‚ö†Ô∏è Pre-inizializzazione SDK fallita (normale se MetaMask non installato): ' + error.message);
        }
        
        // Initialize analytics
        initAnalytics();
        log('üí° Ctrl+Shift+A per dashboard admin');
        
        log('üåê Pagina caricata - Sistema pronto');
        log(`‚úÖ Ethers.js v${ethers.version} caricato`);
        log('‚úÖ MetaMask SDK caricato');
        log(`‚úÖ ABI contratto caricata (${window.CONTRACT_ABI ? window.CONTRACT_ABI.length : 0} funzioni)`);
        
        log(`üîß Contratto NFT: ${CONTRACT_ADDRESS}`);
        log(`üîß Contratto FT: ${FT_CONTRACT_ADDRESS}`);
        
        document.getElementById('connect-btn').addEventListener('click', connectWallet);
        document.getElementById('interactive-mint-btn').addEventListener('click', mintNFT);
        
        const ftBtn = document.getElementById('buy-ft-btn');
        if (ftBtn) {
            ftBtn.addEventListener('click', buyFT);
        }
        
        document.getElementById('token-id-select').addEventListener('change', calculateTotalPrice);
        document.getElementById('quantity-select').addEventListener('change', calculateTotalPrice);
        
        const ftAmountInput = document.getElementById('ft-amount');
        if (ftAmountInput) {
            ftAmountInput.addEventListener('input', (e) => {
                const amount = parseInt(e.target.value) || 0;
                const totalPOL = (amount * parseFloat(FT_PRICE_POL)).toFixed(4);
                const totalUSD = (amount * 0.02).toFixed(2);
                document.getElementById('ft-price-display').textContent = 
                    `Prezzo: ${totalPOL} POL (‚âà $${totalUSD})`;
            });
        }
        
        calculateTotalPrice();
        
        log("‚úÖ Event listeners registrati");
        log("üíª Sistema pronto. Clicca 'Connetti Wallet' per iniziare.");
        updateMintStatus('ready', 'In attesa di connessione wallet');
        
        // Verifica contratto dopo 2 secondi
        setTimeout(() => verifyContract(), 2000);
    });
    </script>
<script>
// Imposta la lingua predefinita come italiano
let currentLanguage = 'it';
// Oggetto contenente le traduzioni
const translations = {
  'it': {
    'LHISA NFT Ricerca Scientifica e Salute': 'LHISA NFT Scientific Research and Health',
    'La nostra struttura medica all\'avanguardia.': 'Our cutting-edge medical facility.',
    'Spazi dedicati al benessere e alla riabilitazione.': 'Spaces dedicated to wellness and rehabilitation.',
    'Architettura e comfort al servizio della salute.': 'Architecture and comfort at the service of health.',
    'Logo Icona LHI Lecce NFT per Polygon ed Opensea Market Place.': 'Logo Icon LHI Lecce NFT for Polygon and Opensea Market Place.',
    'Un Progetto Immobiliare Reale, un Valore Tangibile': 'A Real Estate Project, a Tangible Value',
    'La Depressione. Un Progetto per la ricerca scientifica': 'Depression. A Project for Scientific Research',
    
    // Traduzioni Sezione 3 - Storia LHI
    'section3_title': 'History of Life Healthcare International - L.H.I Construction',
    'section3_1': 'The Life Healthcare International project stems from the innovative vision of creating an excellent healthcare and hospitality facility in the heart of Salento. Under the leadership of Dr. Cinzia Colizzi, Chairman of the Board and Chartered Accountant, the project took shape through a complex design and financial process that involved the most important institutions and professionals in the Puglia region, representing a virtuous example of public-private collaboration in the healthcare and hospitality sector.',
    'section3_2': 'The architectural design was entrusted to a team of excellence led by architect Angelo Ingrosso and engineer Pietro Licignano, who developed an innovative conception of healthcare and hospitality spaces. Dr. Antonio Primiceri, as Works Manager, coordinated the entire implementation process, while technical direction was managed by a triumvirate of expert engineers: engineer Donato Nocco, engineer Pietro Licignano and engineer Roberto Paladini, ensuring maximum execution quality and compliance with the most stringent regulations.',
    'section3_3': 'The structural aspect of the complex was developed by engineers Donato Nocco and Livio Calo\', who designed a state-of-the-art structure capable of combining seismic safety, environmental sustainability and operational functionality. The systems design was entrusted to a specialized team of industrial experts: Antonio Laurenti, Piero Romano, Giuseppe Serafino, Sandro Ciurlia and Giuseppe Martella, who integrated the most modern technologies for air conditioning, medical systems and automation systems, creating an excellent technological ecosystem.',
    'section3_4': 'Safety coordination during execution was entrusted to engineer Roberto Paladini, who implemented innovative safety protocols for a construction site of such complexity. The final testing phase was managed by engineers Vito Morciano and Giuseppe Bruno, who certified the work\'s compliance according to the highest standards. The project benefited from the technical support of the Itaca Puglia Protocol 2011-2017, ensuring environmental sustainability and energy efficiency of the structure according to the most advanced European regulations.',
    'section3_5': 'The project financing represents a virtuous example of collaboration between public and private institutions. The Puglia Region contributed through the Puglia ERDF Operational Program 2014-2020, recognizing the strategic value of the initiative for territorial development. Monte dei Paschi Siena and Capital Service of Florence provided specialized financial support, while Banca Popolare Pugliese and Banca di Credito Cooperativo di Terra d\'Otranto guaranteed territorial credit support, demonstrating the local banking system\'s confidence in the project.',
    'section3_6': 'The realization of Life Healthcare International required over a decade of work, from conception to finalization, involving dozens of investor families who believed in the vision of integrated and sustainable healthcare. The project represents a total investment of 10 million euros, distributed over an area of 4,000 square meters developed on 7 floors, strategically positioned in front of Lecce\'s main hospital centers to ensure maximum synergy with the regional healthcare system.',
    'section3_7': 'Today Life Healthcare International stands as a reference point in healthcare innovation, integrating medical tradition and advanced technologies. The NFT project represents the natural evolution of this pioneering vision, transforming the constructive and professional heritage into digital assets that allow a global community to participate in the future of sustainable healthcare. Each token encapsulates the value of the work of all the professionals, institutions and partners who made this Puglia excellence possible, offering investors a tangible link with a project that continues to evolve towards new horizons of healthcare and social innovation.',
    
    // Traduzioni NFT
    'nft_5': 'Coin 5 LHI',
    'nft_10': 'Coin 10 LHI',
    'nft_15': 'Coin 15 LHI',
    'nft_20': 'Coin 20 LHI',
    'nft_25': 'Coin 25 LHI',
    'nft_30': 'Coin 30 LHI',
    'nft_35': 'Coin 35 LHI',
    'nft_40': 'Coin 40 LHI',
    'nft_45': 'Coin 45 LHI',
    'nft_50': 'Coin 50 LHI',
    'nft_55': 'Coin 55 LHI',
    'nft_60': 'Coin 60 LHI',
    'nft_65': 'Coin 65 LHI',
    'nft_70': 'Coin 70 LHI',
    'nft_75': 'Coin 75 LHI',
    'nft_80': 'Coin 80 LHI',
    'nft_85': 'Coin 85 LHI',
    'nft_90': 'Coin 90 LHI',
    'nft_95': 'Coin 95 LHI',
    'nft_100': 'Coin 100 LHI',
    
    'Acquistando un NFT, non solo entri in possesso di un asset digitale di valore, ma finanzi direttamente la ricerca scientifica per la guarigione dalla "DEPRESSIONE", contribuendo a un obiettivo di immenso valore sociale. Il referente scientifico, Responsabile del progetto di ricerca e cura √® il Prof. Riccardo SIMONI, iscritto all\'Ordine dei Medici di Firenze. Consulta curriculum Il Responsabile scientifico del progetto, √® medico specialista in Psichiatria, che vanta 30 anni di grande esperienza clinica ospedaliera, docenza in corsi di specializzazione e master di formazione per la ricerca scientifica e farmacologica, e pu√≤ documentare numerosi casi di guarigione grazie all\'uso di una terapia personalizzata, monitorata in tempo reale con flusso di feedback individuali sulle terapie personalizzate. dalla Depressione, anche di personaggi dello spettacolo. La Depressione √® ormai annoverata come una malattia sociale, molto insidiosa e non facilmente riconoscibile nelle famiglie, che oggi pu√≤ colpire chiunque, senza distinzione di et√†, di livello d\'istruzione o di attivit√† di lavoro. iL Prof. Riccardo SIMONI ha dedicato 35 anni di studi clinici alla patologia depressiva, individuando i farmaci pi√π efficaci e meno aggressivi per l\'organismo, e riportando il paziente al pieno equilibrio psicofisico nella gestione delle proprie capacit√†.': 'By purchasing an NFT, you not only own a valuable digital asset, but you directly fund scientific research into the treatment of DEPRESSION, contributing to a goal of immense social value. The scientific director and head of the research and treatment project is Professor Riccardo Simoni, a member of the Florence Medical Association. View CV. The project\'s scientific director is a specialist in psychiatry with 30 years of extensive clinical experience in hospitals, teaching specialization courses and master\'s degrees in scientific and pharmacological research. He has documented numerous cases of recovery through the use of personalized therapy, monitored in real time with individual feedback on personalized therapies. Depression, including celebrities, is now considered a social illness, highly insidious and not easily recognized within families. Today, it can affect anyone, regardless of age, education level, or occupation. Prof. Riccardo SIMONI has dedicated 35 years of clinical studies to the pathology of depression, identifying the most effective and least aggressive drugs for the body, and restoring the patient to full psychophysical balance in the management of their own abilities.',
    'Il nostro SMART CONTRACT agisce come una Zecca Digitale. √à costruito sulla blockchain Polygon usando gli strumenti pi√π robusti e moderni, garantendo che ogni NFT sia irripetibile, non falsificabile e immutabile. Monitorato h24 per essere inattaccabile da virus e malware.': 'Our SMART CONTRACT acts as a Digital Mint. It\'s built on the Polygon blockchain using the most robust and modern tools, ensuring that each NFT is unique, unforgeable, and immutable. It\'s monitored 24/7 to ensure it\'s immune to viruses and malware.',
    'Quando clicchi "Mint", la Zecca Digitale di LHI, crea un bene virtuale immutabile che √® soltanto per te. Ogni "Mint" genera un "Certificato di Nascita" (la transazione sulla blockchain) e un "Certificato di Residenza" cio√® la sua presenza nel tuo wallet), garantendoti il pieno e verificabile possesso del tuo asset digitale. Nessuno potr√† mai appropriarsi del tuo NFT che pu√≤ essere venduto soltanto da te in rete tramite la tua firma digitale convalidata dal tuo wallet elettronico protetto da password, impronta digitale fisica e chiave privata elettronica di 64 caratteri': 'When you click "Mint," LHI\'s Digital Mint creates an immutable virtual asset that\'s unique to you. Each "Mint" generates a "Birth Certificate" (the transaction on the blockchain) and a "Certificate of Residency" (i.e., its presence in your wallet), guaranteeing you full and verifiable ownership of your digital asset. No one will ever be able to steal your NFT, which can only be sold online by you using your digital signature validated by your password-protected electronic wallet, physical fingerprint, and 64-character electronic private key.',
    'Il valore del tuo NFT √® destinato a crescere per la elevata qualit√†dei servizi offerti. LHI √® presente da tempo nella lista degli Hotel a 4 stelle offerto su Booking ed Espedia. LHI vuole essere anche un centro di sollievo dalla sofferenza, offrendo una piscina con acqua di mare purissima estratta a 350 metri di profondit√† per talassoterapia, sauna e servizi di riabilitazione. Sostenere questo progetto significa investire in un ecosistema di benessere reale.': 'The value of your NFT is destined to grow with the excellence of the services offered. LHI has long been listed among the 4-star hotels offered on Booking.com and Espedia. LHI also aims to be a center for pain relief, offering a pool with pure seawater extracted from a depth of 350 meters for thalassotherapy, a sauna, and rehabilitation services. Supporting this project means investing in a real wellness ecosystem.',
    'CONTROLLA tu stesso il codice Solidity dello smart contract che √® stato verificato, con segno di spunta Verde, sulla piattaforma blockchain Polygonscan, (protetto da Copyright) ma √® anche presente su GitHub, piattaforma mondiale ed affidabile degli sviluppatori informatici. üîç Codice Trasparente del Contratto intelligente': 'CHECK for yourself the Solidity smart contract code, which has been verified with a green checkmark on the Polygonscan blockchain platform (protected by copyright), but is also available on GitHub, a global and trusted platform for IT developers. üîç Transparent Smart Contract Code',
    'L\'interfaccia frontend supporta la connessione tramite MetaMask Browser Extension (modalit√† prioritaria) e MetaMask SDK come fallback automatico quando l\'estensione non √® disponibile. Configurato per Polygon Mainnet tramite Infura.': 'The frontend interface supports connection via MetaMask Browser Extension (priority mode) and MetaMask SDK as automatic fallback when the extension is not available. Configured for Polygon Mainnet via Infura.',
    'Team e Collaboratori Presidente del CdA: Dott.ssa Cinzia Colizzi (Dottore Commercialista)Responsabile dei lavori: dott. Antonio Primiceri Direttore dei Lavori: ing. Donato Nocco, ing. Pietro Licignano, ing. Roberto Paladini Coordinatore Sicurezza Esecuzione: ing. Roberto Paladini Progettisti Architettonici: arch. Angelo Ingrosso ing. Pietro Licignano Progettisti Strutture: ing. Donato Nocco e ing. Livio Calo\' Progettisti Impianti: p.ti ind.li Antonio Laurenti, Piero Romano, Giuseppe Serafino, Sandro Ciurlia, Giuseppe Martella Collaudatori: ing. Vito Morciano, ing. Giuseppe Bruno Partner Finanziari e Contributi Contributo Regione Puglia programma Operativo Puglia FESR 2014-2020, Monte dei Paschi Siena, Capital Service di FirenzeBanca Popolare Pugliese, Banca di Credito Cooperativo di Terra d\'Otranto. Supporto tecnico Protocollo Itaca Puglia 2011-2017 üôè Grazie ancora per la tua visita! Lascia un feedback!': 'Team and Collaborators: Chairman of the Board of Directors: Dr. Cinzia Colizzi (Chartered Accountant) Project Manager: Dr. Antonio Primiceri Construction Manager: Eng. Donato Nocco, Eng. Pietro Licignano, Eng. Roberto Paladini Execution Safety Coordinator: Eng. Roberto Paladini Architectural Designers: Architect Angelo Ingrosso, Eng. Pietro Licignano Structural Designers: Eng. Donato Nocco and Eng. Livio Calo\' Systems Designers: Industrial Engineers Antonio Laurenti, Piero Romano, Giuseppe Serafino, Sandro Ciurlia, Giuseppe Martella Test Engineers: Eng. Vito Morciano, Eng. Giuseppe Bruno Financial Partners and Contributions: Contribution from the Puglia Region, Puglia ERDF Operational Program 2014-2020, Monte dei Paschi Siena, Capital Service of Florence, Banca Popolare Pugliese, Banca di Credito Cooperativo di Terra d\'Otranto. Technical Support for the Itaca Puglia Protocol 2011-2017 üôè Thanks again for visiting! Leave your feedback!',
    'Smart Contract Verificato - Leggilo aprendo questo link.': 'Verified Smart Contract - Read it by opening this link.',
    'Codice Trasparente del Contratto intelligente': 'Transparent Code of the Smart Contract',
    'Visita lhilecce.it SITO UFFICIALE': 'Visit lhilecce.it OFFICIAL WEBSITE',
    'Esplora il Medical Hotel LHI con Google Maps': 'Explore the LHI Medical Hotel with Google Maps',
        'Booking prenota la tua camera a Lecce in LHI': 'Booking reserve your room in Lecce at LHI'
    }
};
// Funzione per cambiare la lingua
function toggleLanguage() {
  const translateBtn = document.getElementById('translateBtn');
  
  // Cambia la lingua corrente
  if (currentLanguage === 'it') {
    currentLanguage = 'en';
    translateBtn.textContent = 'Italiano';
    translateElements();
  } else {
    currentLanguage = 'it';
    translateBtn.textContent = 'English';
    restoreOriginal();
  }
}

// Funzione per tradurre gli elementi
function translateElements() {
        // Salva il testo originale e traduci (pi√π robusto, salta elementi con immagini)
        document.querySelectorAll('h1, h2, h3, h4, p, a, div:not(.language-selector), span, button:not(#translateBtn)').forEach(element => {
            // Salta gli elementi che contengono immagini
            if (element.querySelector && element.querySelector('img')) return;
            const text = element.innerText.trim();
            if (text && !element.hasAttribute('data-original')) {
                element.setAttribute('data-original', element.innerHTML);
                let translated = null;
                // Normalizza testo (spazi, minuscole)
                const normText = text.replace(/\s+/g, ' ').toLowerCase();
                for (const [original, eng] of Object.entries(translations.it)) {
                    const normOrig = original.replace(/\s+/g, ' ').toLowerCase();
                    // Traduzione esatta
                    if (normText === normOrig) {
                        translated = eng;
                        break;
                    }
                }
                // Traduzione parziale (se non trovata esatta)
                if (!translated) {
                    for (const [original, eng] of Object.entries(translations.it)) {
                        const normOrig = original.replace(/\s+/g, ' ').toLowerCase();
                        if (normText.includes(normOrig) && normOrig.length > 10) {
                            translated = text.replace(new RegExp(original, 'gi'), eng);
                            break;
                        }
                    }
                }
                if (translated) {
                    element.innerText = translated;
                }
            }
        });
        // Mantieni esplicitamente le immagini
        document.querySelectorAll('img').forEach(img => {
            if (img.src) {
                img.setAttribute('data-original-src', img.src);
            }
        });
}

// Funzione per ripristinare il testo originale
function restoreOriginal() {
        document.querySelectorAll('[data-original]').forEach(element => {
            element.innerHTML = element.getAttribute('data-original');
        });
        // Ripristina src delle immagini
        document.querySelectorAll('img[data-original-src]').forEach(img => {
            img.src = img.getAttribute('data-original-src');
        });
}
</script>
</main>

<!-- Admin Dashboard -->
<div id="admin-dash" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; border:2px solid #333; padding:20px; border-radius:10px; z-index:10000; max-width:500px; box-shadow:0 10px 40px rgba(0,0,0,0.3);">
    <button onclick="closeDash()" style="position:absolute; top:10px; right:10px; background:#dc3545; color:white; border:none; padding:5px 10px; cursor:pointer; border-radius:4px;">‚úï</button>
    <h3 style="margin-top:0;">üìä LHISA Analytics</h3>
    <div id="dash-content"></div>
    <button onclick="window.exportAnalytics()" style="margin-top:15px; background:#28a745; color:white; border:none; padding:10px; width:100%; cursor:pointer; border-radius:4px;">üì• Export</button>
</div>

<script>
document.addEventListener('keydown', (e) => {
    // Use Ctrl+Shift+A (for "Analytics") to avoid conflicts with dev tools
    if (e.ctrlKey && e.shiftKey && e.key === 'A') {
        e.preventDefault();
        toggleDash();
    }
});

function toggleDash() {
    const dash = document.getElementById('admin-dash');
    if (dash.style.display === 'block') {
        closeDash();
    } else {
        openDash();
    }
}

function openDash() {
    const dash = document.getElementById('admin-dash');
    const content = document.getElementById('dash-content');
    
    content.innerHTML = `
        <ul style="list-style:none; padding:0;">
            <li>üåê Visite: <strong>${analytics.visits}</strong></li>
            <li>üîó Connessioni: <strong>${analytics.walletConnects}</strong></li>
            <li>üé® Mint Riusciti: <strong>${analytics.mints}</strong></li>
            <li>üîÑ Tentativi Mint: <strong>${analytics.mintAttempts}</strong></li>
            <li>üö® Errori: <strong>${analytics.errors.length}</strong></li>
            <li>üìä Eventi: <strong>${analytics.events.length}</strong></li>
        </ul>
        <p style="font-size:0.9em; color:#666;">‚ö° Caricamento: ${perfMonitor.metrics.pageLoad ? (perfMonitor.metrics.pageLoad/1000).toFixed(2) + 's' : 'N/A'}</p>
        <p style="font-size:0.85em; color:#999;">Premi Ctrl+Shift+A per chiudere o usa il pulsante ‚úï</p>
    `;
    
    dash.style.display = 'block';
}

function closeDash() {
    document.getElementById('admin-dash').style.display = 'none';
}
</script>

</body>



</html>
